{
  "name": "download_synapse_data",
  "description": "Download data from Synapse using entity IDs. Uses the synapse CLI to download files, folders, or projects from Synapse. Requires SYNAPSE_AUTH_TOKEN environment variable for authentication.",
  "version": "1.0.0",
  "author": "Biomni Support Tools",
  "license": "MIT",
  "input": {
    "type": "object",
    "properties": {
      "entity_ids": {
        "type": "string",
        "description": "Synapse entity ID(s) to download. For files: can be a single ID or JSON array of IDs. For datasets/folders/projects: must be a single ID only"
      },
      "download_location": {
        "type": "string",
        "description": "Directory where files will be downloaded",
        "default": "."
      },
      "follow_link": {
        "type": "boolean",
        "description": "Whether to follow links to download the linked entity",
        "default": false
      },
      "recursive": {
        "type": "boolean",
        "description": "Whether to recursively download folders and their contents (ONLY valid for entity_type='folder')",
        "default": false
      },
      "timeout": {
        "type": "integer",
        "description": "Timeout in seconds for each download operation",
        "default": 300
      },
      "entity_type": {
        "type": "string",
        "description": "Type of Synapse entity: 'dataset', 'file', 'folder', or 'project'. MUST match the actual entity type from search results!",
        "default": "dataset"
      }
    },
    "required": ["entity_ids", "download_location", "follow_link", "recursive", "timeout", "entity_type"]
  },
  "output": {
    "type": "object",
    "properties": {
      "success": {
        "type": "boolean",
        "description": "Whether the operation succeeded"
      },
      "result": {
        "type": "object",
        "description": "Dictionary containing download results with success/failure counts and details"
      },
      "error": {
        "type": "string",
        "description": "Error message if operation failed"
      }
    }
  },
  "execution": {
    "command": "python3",
    "args": [
      "download_synapse_data.py",
      "{{entity_ids}}",
      "{{download_location}}",
      "{{follow_link}}",
      "{{recursive}}",
      "{{timeout}}",
      "{{entity_type}}"
    ]
  }
}
