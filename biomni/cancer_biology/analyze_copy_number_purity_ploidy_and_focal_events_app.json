{
  "name": "biomni-analyze-copy-number-purity-ploidy-and-focal-events",
  "title": "Biomni: Analyze Copy Number Purity Ploidy And Focal Events",
  "description": "Perform comprehensive copy number variation (CNV) analysis, estimate tumor purity and ploidy, and detect focal amplification/deletion events in cancer samples. Provides insights into genomic instability and oncogenic drivers.",
  "content": "<h3>Overview</h3><p>Perform comprehensive copy number variation (CNV) analysis, estimate tumor purity and ploidy, and detect focal amplification/deletion events in cancer samples. This tool integrates multiple computational approaches to characterize genomic instability patterns, identify oncogenic drivers through focal amplifications, and tumor suppressor losses through deletions. Accurate estimation of tumor purity and ploidy is essential for interpreting somatic alterations and understanding clonal architecture.</p><h3>Input Parameters</h3><ul><li><strong>tumor_bam</strong> (string, required): Path to the tumor sample BAM file (aligned sequencing reads)</li><li><strong>reference_genome</strong> (string, required): Path to the reference genome FASTA file</li><li><strong>output_dir</strong> (string, optional): Directory for output files (default: './results')</li><li><strong>normal_bam</strong> (string, optional): Path to the matched normal sample BAM file for paired analysis</li></ul><h3>Input Format</h3><p>JSON file with the following structure:</p><pre>{\n  \"tumor_bam\": \"/path/to/tumor.bam\",\n  \"reference_genome\": \"/path/to/reference.fa\",\n  \"output_dir\": \"./cnv_results\",\n  \"normal_bam\": \"/path/to/normal.bam\"\n}</pre><h3>Biological Use Case</h3><p>Copy number alterations are a hallmark of cancer and drive oncogenesis through multiple mechanisms. This tool addresses critical questions in cancer genomics:</p><ul><li><strong>Oncogene amplification</strong>: Detect focal amplifications of oncogenes (e.g., ERBB2, MYC, EGFR) that drive tumor growth</li><li><strong>Tumor suppressor deletion</strong>: Identify homozygous deletions of tumor suppressors (e.g., CDKN2A, PTEN, RB1)</li><li><strong>Chromosomal instability</strong>: Quantify arm-level and whole-chromosome alterations indicative of genomic instability</li><li><strong>Tumor heterogeneity</strong>: Estimate tumor purity and ploidy to correct for normal cell contamination and assess clonal structure</li><li><strong>Therapeutic targets</strong>: Identify amplified genes as potential therapeutic targets (e.g., ERBB2 amplification for HER2-targeted therapy)</li><li><strong>Prognostic markers</strong>: Use CNV burden and specific focal events as prognostic indicators</li></ul><h3>Output</h3><p>Text file (copy_number_results.txt) containing comprehensive CNV analysis including: segmented copy number profiles, estimated tumor purity and ploidy values, list of focal amplification and deletion events with genomic coordinates, affected genes, and statistical significance scores.</p><h3>Category</h3><p>cancer_biology</p>",
  "command": "rm -rf prod_apps 2>/dev/null || true && git clone --depth 1 https://github.com/CamberCloud-Inc/prod_apps.git prod_apps && python3 prod_apps/biomni/cancer_biology/analyze_copy_number_purity_ploidy_and_focal_events.py \"${tumorBam}\" \"${referenceGenome}\" -o \"${outputDir}\" --output-dir \"${outputDirInternal}\" ${normalBam ? `--normal-bam \"${normalBam}\"` : \"\"}",
  "engineType": "MPI",
  "jobConfig": [
    {
      "type": "Select",
      "label": "System Size",
      "name": "system_size",
      "hidden": true,
      "description": "Select the configuration for the job",
      "options": [
        {
          "label": "Extra Extra Small CPU",
          "value": "xxsmall_cpu",
          "mapValue": {
            "nodeSize": "XXSMALL",
            "numNodes": 1,
            "withGpu": false
          }
        }
      ],
      "defaultValue": "xxsmall_cpu"
    }
  ],
  "spec": [
    {
      "type": "Stash File",
      "name": "tumorBam",
      "label": "Tumor BAM File",
      "description": "Upload the tumor sample BAM file (aligned sequencing reads)",
      "defaultValue": ""
    },
    {
      "type": "Stash File",
      "name": "referenceGenome",
      "label": "Reference Genome",
      "description": "Upload the reference genome FASTA file",
      "defaultValue": ""
    },
    {
      "type": "Stash File",
      "name": "normalBam",
      "label": "Normal BAM File (Optional)",
      "description": "Upload the matched normal sample BAM file for paired analysis (optional)",
      "defaultValue": "",
      "required": false
    },
    {
      "type": "Input",
      "name": "outputDirInternal",
      "label": "Output Directory Name",
      "description": "Directory name for output files",
      "defaultValue": "./results"
    },
    {
      "type": "Stash File",
      "name": "outputDir",
      "label": "Output Directory",
      "description": "Select or create a stash folder where the results will be saved",
      "defaultValue": "./"
    }
  ]
}