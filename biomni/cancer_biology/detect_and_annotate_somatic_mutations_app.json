{
  "name": "biomni-detect-and-annotate-somatic-mutations",
  "title": "Biomni: Detect And Annotate Somatic Mutations",
  "description": "Detects and annotates somatic mutations in tumor samples compared to matched normal samples. Uses GATK Mutect2 for variant calling, GATK FilterMutectCalls for filtering, and SnpEff for functional annotation of somatic mutations.",
  "content": "<h3>Overview</h3><p>Detects and annotates somatic mutations in tumor samples compared to matched normal samples using state-of-the-art bioinformatics tools. This comprehensive pipeline employs GATK Mutect2 for sensitive somatic variant calling, GATK FilterMutectCalls for rigorous quality filtering to minimize false positives, and SnpEff for functional annotation to predict the biological impact of detected mutations. Essential for identifying driver mutations, actionable alterations, and understanding tumor mutational profiles.</p><h3>Input Parameters</h3><ul><li><strong>tumor_bam</strong> (string, required): Path to the tumor sample BAM file (aligned sequencing reads)</li><li><strong>normal_bam</strong> (string, required): Path to the matched normal sample BAM file for germline filtering</li><li><strong>reference_genome</strong> (string, required): Path to the reference genome FASTA file</li><li><strong>output_prefix</strong> (string, required): Prefix for output files</li><li><strong>snpeff_database</strong> (string, optional): SnpEff annotation database version (default: 'GRCh38.105')</li></ul><h3>Input Format</h3><p>JSON file with the following structure:</p><pre>{\n  \"tumor_bam\": \"/path/to/tumor.bam\",\n  \"normal_bam\": \"/path/to/normal.bam\",\n  \"reference_genome\": \"/path/to/reference.fa\",\n  \"output_prefix\": \"patient_001\",\n  \"snpeff_database\": \"GRCh38.105\"\n}</pre><h3>Biological Use Case</h3><p>Somatic mutation detection is fundamental to cancer genomics research and precision oncology. This tool enables researchers to:</p><ul><li><strong>Identify driver mutations</strong>: Detect mutations in cancer driver genes (e.g., TP53, KRAS, EGFR, PIK3CA) that initiate or promote tumorigenesis</li><li><strong>Discover actionable alterations</strong>: Find mutations with therapeutic implications for targeted therapy selection (e.g., BRAF V600E, EGFR exon 19 deletions)</li><li><strong>Characterize mutational signatures</strong>: Analyze mutation patterns to infer mutational processes (e.g., UV exposure, smoking, APOBEC activity, DNA repair defects)</li><li><strong>Assess tumor mutational burden (TMB)</strong>: Quantify total somatic mutations as a biomarker for immunotherapy response</li><li><strong>Study clonal evolution</strong>: Track mutation acquisition during tumor progression and therapy</li><li><strong>Predict functional impact</strong>: Annotate mutations with predicted effects on protein function, splice sites, and regulatory regions</li><li><strong>Support clinical decision-making</strong>: Provide actionable genomic information for molecular tumor boards</li></ul><h3>Output</h3><p>Text file (somatic_mutations_results.txt) containing comprehensive mutation analysis including: annotated VCF file with all detected somatic variants, functional annotations (missense, nonsense, frameshift, splice site, etc.), gene names and affected transcripts, predicted protein changes, variant allele frequencies, and clinical significance annotations.</p><h3>Category</h3><p>cancer_biology</p>",
  "command": "rm -rf prod_apps 2>/dev/null || true && git clone --depth 1 https://github.com/CamberCloud-Inc/prod_apps.git prod_apps && python3 prod_apps/biomni/cancer_biology/detect_and_annotate_somatic_mutations.py \"${tumorBam}\" \"${normalBam}\" \"${referenceGenome}\" \"${outputPrefix}\" -o \"${outputDir}\" --snpeff-database \"${snpeffDatabase}\"",
  "engineType": "MPI",
  "jobConfig": [
    {
      "type": "Select",
      "label": "System Size",
      "name": "system_size",
      "hidden": true,
      "description": "Select the configuration for the job",
      "options": [
        {
          "label": "Extra Extra Small CPU",
          "value": "xxsmall_cpu",
          "mapValue": {
            "nodeSize": "XXSMALL",
            "numNodes": 1,
            "withGpu": false
          }
        }
      ],
      "defaultValue": "xxsmall_cpu"
    }
  ],
  "spec": [
    {
      "type": "Stash File",
      "name": "tumorBam",
      "label": "Tumor BAM File",
      "description": "Upload the tumor sample BAM file (aligned sequencing reads)",
      "defaultValue": ""
    },
    {
      "type": "Stash File",
      "name": "normalBam",
      "label": "Normal BAM File",
      "description": "Upload the matched normal sample BAM file for germline filtering",
      "defaultValue": ""
    },
    {
      "type": "Stash File",
      "name": "referenceGenome",
      "label": "Reference Genome",
      "description": "Upload the reference genome FASTA file",
      "defaultValue": ""
    },
    {
      "type": "Text",
      "name": "outputPrefix",
      "label": "Output Prefix",
      "description": "Prefix for output files (e.g., patient_001)",
      "defaultValue": "sample"
    },
    {
      "type": "Text",
      "name": "snpeffDatabase",
      "label": "SnpEff Database",
      "description": "SnpEff annotation database version",
      "defaultValue": "GRCh38.105"
    },
    {
      "type": "Stash File",
      "name": "outputDir",
      "label": "Output Directory",
      "description": "Select or create a stash folder where the results will be saved",
      "defaultValue": "./"
    }
  ]
}