{
  "name": "analyze-myofiber-morphology",
  "title": "Analyze Myofiber Morphology",
  "description": "Quantify morphological properties of myofibers in microscopy images",
  "content": "<h3 class=\"heading-node\">Overview</h3><p class=\"text-node\">This application quantifies morphological properties of myofibers in microscopy images of tissue sections. Built using <a class=\"link\" href=\"https://github.com/snap-stanford/Biomni\" target=\"_blank\">Biomni</a>, it segments nuclei and myofibers to calculate area, perimeter, eccentricity, and other metrics.</p><h3 class=\"heading-node\">Features</h3><ul class=\"list-node\"><li class=\"list-item-node\">Automated segmentation of nuclei and myofibers</li><li class=\"list-item-node\">Multiple thresholding methods (Otsu, adaptive, manual)</li><li class=\"list-item-node\">Measures area, perimeter, eccentricity, solidity, and orientation</li><li class=\"list-item-node\">Counts nuclei inside myofibers</li><li class=\"list-item-node\">Generates labeled visualization images</li></ul><h3 class=\"heading-node\">Parameters</h3><ul class=\"list-node\"><li class=\"list-item-node\"><strong>Image Path</strong>: Multichannel microscopy image with nuclei and myofiber staining</li><li class=\"list-item-node\"><strong>Nuclei Channel</strong>: Channel index for nuclei (DAPI, Hoechst, etc.)</li><li class=\"list-item-node\"><strong>Myofiber Channel</strong>: Channel index for myofiber staining (α-Actinin, etc.)</li><li class=\"list-item-node\"><strong>Threshold Method</strong>: Segmentation method (otsu, adaptive, or manual)</li><li class=\"list-item-node\"><strong>Output Directory</strong>: Select or create a stash folder for output</li></ul><h3 class=\"heading-node\">Output</h3><p class=\"text-node\">The application generates CSV files with morphological measurements and labeled PNG images showing segmented myofibers.</p><h3 class=\"heading-node\">Use Cases</h3><ul class=\"list-node\"><li class=\"list-item-node\">Muscle tissue analysis</li><li class=\"list-item-node\">Disease progression studies</li><li class=\"list-item-node\">Drug treatment effects on muscle</li><li class=\"list-item-node\">Regenerative medicine research</li></ul>",
  "command": "rm -rf prod_apps 2>/dev/null || true && git clone https://github.com/CamberCloud-Inc/prod_apps.git prod_apps && python \"prod_apps/biomni/bioengineering/analyze_myofiber_morphology.py\" \"${imagePath}\" --nuclei-channel ${nucleiChannel} --myofiber-channel ${myofiberChannel} --threshold-method ${thresholdMethod} -o \"${outputDir}\"",
  "engineType": "MPI",
  "jobConfig": [
    {
      "type": "Select",
      "label": "System Size",
      "name": "system_size",
      "hidden": true,
      "description": "Select the configuration for the job",
      "options": [
        {
          "label": "Small CPU",
          "value": "small_cpu",
          "mapValue": {
            "nodeSize": "SMALL",
            "numNodes": 1,
            "withGpu": false
          }
        }
      ],
      "defaultValue": "small_cpu"
    }
  ],
  "spec": [
    {
      "type": "Stash File",
      "name": "imagePath",
      "label": "Image Path",
      "description": "Path to multichannel microscopy image (with nuclei and myofiber staining)",
      "defaultValue": ""
    },
    {
      "type": "Number",
      "name": "nucleiChannel",
      "label": "Nuclei Channel",
      "description": "Channel index containing nuclei staining (DAPI, Hoechst, etc.)",
      "defaultValue": 2
    },
    {
      "type": "Number",
      "name": "myofiberChannel",
      "label": "Myofiber Channel",
      "description": "Channel index containing myofiber staining (α-Actinin, etc.)",
      "defaultValue": 1
    },
    {
      "type": "Select",
      "name": "thresholdMethod",
      "label": "Threshold Method",
      "description": "Segmentation thresholding method",
      "options": [
        {
          "label": "Otsu",
          "value": "otsu"
        },
        {
          "label": "Adaptive",
          "value": "adaptive"
        },
        {
          "label": "Manual",
          "value": "manual"
        }
      ],
      "defaultValue": "otsu"
    },
    {
      "type": "Stash File",
      "name": "outputDir",
      "label": "Output Directory",
      "description": "Select or create a stash folder where results will be saved",
      "defaultValue": "./"
    }
  ]
}
