{
  "name": "biomni-perform-flux-balance-analysis",
  "title": "Biomni: Perform Flux Balance Analysis",
  "description": "Perform Flux Balance Analysis (FBA) on a genome-scale metabolic network model to predict metabolic flux distributions",
  "content": "<h3>Overview</h3><p>Perform Flux Balance Analysis (FBA) on genome-scale metabolic network models to predict optimal metabolic flux distributions. FBA uses linear programming to optimize an objective function (typically biomass production or product yield) while satisfying mass balance constraints, enabling prediction of cellular metabolism under different conditions.</p><h3>Input Parameters</h3><ul><li><strong>model_file</strong> (string, required): Path to the metabolic model file (SBML, JSON, or MAT format)</li><li><strong>constraints</strong> (dict, required): Dictionary of flux constraints for specific reactions (lower and upper bounds)</li><li><strong>objective_reaction</strong> (string, required): The reaction ID to optimize (e.g., 'Biomass_reaction' or specific product synthesis)</li><li><strong>output_file</strong> (string, optional): Name for the output CSV file containing flux values (default: 'fba_results.csv')</li></ul><h3>Biological Use Case</h3><p>FBA is a cornerstone method in systems biology for:</p><ul><li>Predicting cellular growth rates and metabolic capabilities under different nutrient conditions</li><li>Engineering metabolic pathways for bioproduction (e.g., optimizing ethanol, amino acid, or biofuel production)</li><li>Identifying essential genes and synthetic lethal pairs for drug target discovery</li><li>Analyzing metabolic flux redistribution in response to genetic perturbations</li><li>Studying microbial community metabolism and cross-feeding interactions</li><li>Designing minimal media formulations for cell culture or fermentation</li><li>Predicting metabolic bottlenecks and overflow metabolism</li></ul><h3>Output</h3><p>The FBA analysis produces:</p><ul><li>Optimal objective function value (e.g., maximum growth rate)</li><li>Complete flux distribution across all reactions in the metabolic network</li><li>Shadow prices indicating the impact of constraints on the objective</li><li>CSV file with reaction IDs, flux values, and reaction equations</li><li>Summary statistics and optimization status</li></ul><p>Results are saved to 'fba_results.txt' and the specified CSV file in the output directory.</p><h3>Category</h3><p>systems_biology</p>",
  "command": "rm -rf prod_apps 2>/dev/null || true && git clone --depth 1 https://github.com/CamberCloud-Inc/prod_apps.git prod_apps && python3 prod_apps/biomni/systems_biology/perform_flux_balance_analysis.py \"${modelFile}\" --constraints \"${constraints}\" --objective-reaction \"${objectiveReaction}\" --output-filename \"${outputFilename}\" -o \"${outputDir}\"",
  "engineType": "MPI",
  "jobConfig": [
    {
      "type": "Select",
      "label": "System Size",
      "name": "system_size",
      "hidden": true,
      "description": "Select the configuration for the job",
      "options": [
        {
          "label": "Extra Extra Small CPU",
          "value": "xxsmall_cpu",
          "mapValue": {
            "nodeSize": "XXSMALL",
            "numNodes": 1,
            "withGpu": false
          }
        }
      ],
      "defaultValue": "xxsmall_cpu"
    }
  ],
  "spec": [
    {
      "type": "Stash File",
      "name": "modelFile",
      "label": "Model File",
      "description": "Path to metabolic model file (SBML, JSON, or MAT format)",
      "defaultValue": ""
    },
    {
      "type": "Input",
      "name": "constraints",
      "label": "Constraints",
      "description": "JSON string with flux constraints (e.g., {\"EX_glc__D_e\": {\"lower\": -10.0, \"upper\": 0.0}})",
      "defaultValue": "{}",
      "required": false
    },
    {
      "type": "Input",
      "name": "objectiveReaction",
      "label": "Objective Reaction",
      "description": "Reaction ID to optimize (e.g., BIOMASS_Ecoli_core_w_GAM)",
      "defaultValue": ""
    },
    {
      "type": "Input",
      "name": "outputFilename",
      "label": "Output Filename",
      "description": "Name for output CSV file",
      "defaultValue": "fba_results.csv"
    },
    {
      "type": "Stash File",
      "name": "outputDir",
      "label": "Output Directory",
      "description": "Output directory in stash",
      "defaultValue": "./"
    }
  ]
}