{
  "name": "biomni-analyze-cas9-mutation-outcomes",
  "title": "Biomni: Analyze Cas9 Mutation Outcomes",
  "description": "Analyze and categorize mutations induced by Cas9 at target sites",
  "content": "<h3>Overview</h3><p>This tool analyzes and categorizes mutations induced by Cas9 nuclease at target genomic sites. It compares reference sequences with edited sequences from multiple reads to identify insertion-deletion (indel) patterns, mutation frequencies, and cell line-specific editing outcomes. The analysis provides comprehensive statistics on CRISPR editing efficiency and mutation profiles.</p><h3>Input Parameters</h3><ul><li><strong>reference_sequences</strong> (string): Path to JSON file containing reference sequences as a dictionary mapping sequence IDs to DNA sequences</li><li><strong>edited_sequences</strong> (string): Path to JSON file with edited sequences as nested dictionary {seq_id: {read_id: sequence}}</li><li><strong>cell_line_info</strong> (string, optional): Path to JSON file containing cell line metadata for each sequence</li><li><strong>output_prefix</strong> (string, optional): Prefix for output files (default: 'cas9_mutation_analysis')</li></ul><h3>Input Format</h3><p>The tool accepts JSON-formatted input files:</p><pre>Reference sequences file:\n{\n  \"target1\": \"ATCGATCGATCG...\",\n  \"target2\": \"GCTAGCTAGCTA...\"\n}\n\nEdited sequences file:\n{\n  \"target1\": {\n    \"read1\": \"ATCG--CGATCG...\",\n    \"read2\": \"ATCGATCGATCG...\"\n  }\n}\n\nCell line info file (optional):\n{\n  \"target1\": {\"cell_line\": \"HEK293\", \"passage\": 5}\n}</pre><h3>Biological Use Case</h3><p>This tool is essential for CRISPR gene editing experiments where researchers need to quantify editing efficiency and characterize mutation patterns. Applications include: knockout validation in cell lines, assessment of on-target editing efficiency, comparison of different Cas9 variants, and quality control for therapeutic genome editing applications.</p><h3>Output</h3><p>The tool generates comprehensive output files including: mutation categorization report (insertions, deletions, substitutions), editing efficiency statistics per target site, cell line-specific mutation profiles (if provided), and a detailed log file (cas9_mutation_analysis_log.txt) containing all analysis results and summary statistics.</p><h3>Category</h3><p>genetics</p>",
  "command": "rm -rf prod_apps 2>/dev/null || true && git clone --depth 1 https://github.com/CamberCloud-Inc/prod_apps.git prod_apps && python3 prod_apps/biomni/genetics/analyze_cas9_mutation_outcomes.py \"${reference_sequences}\" \"${edited_sequences}\" ${cell_line_info:+-c \"${cell_line_info}\"} ${output_prefix:+-p \"${output_prefix}\"} -o \"${outputDir}\"",
  "engineType": "MPI",
  "jobConfig": [
    {
      "type": "Select",
      "label": "System Size",
      "name": "system_size",
      "hidden": true,
      "description": "Select the configuration for the job",
      "options": [
        {
          "label": "Extra Extra Small CPU",
          "value": "xxsmall_cpu",
          "mapValue": {
            "nodeSize": "XXSMALL",
            "numNodes": 1,
            "withGpu": false
          }
        }
      ],
      "defaultValue": "xxsmall_cpu"
    }
  ],
  "spec": [
    {
      "type": "Stash File",
      "name": "reference_sequences",
      "label": "Reference Sequences",
      "description": "Path to JSON file with reference sequences (dict mapping seq_id to sequence)",
      "defaultValue": ""
    },
    {
      "type": "Stash File",
      "name": "edited_sequences",
      "label": "Edited Sequences",
      "description": "Path to JSON file with edited sequences (nested dict: {seq_id: {read_id: sequence}})",
      "defaultValue": ""
    },
    {
      "type": "Stash File",
      "name": "cell_line_info",
      "label": "Cell Line Info (Optional)",
      "description": "Path to JSON file with cell line information (optional)",
      "defaultValue": ""
    },
    {
      "type": "Input",
      "name": "output_prefix",
      "label": "Output Prefix (Optional)",
      "description": "Prefix for output files (default: cas9_mutation_analysis)",
      "defaultValue": ""
    },
    {
      "type": "Stash File",
      "name": "outputDir",
      "label": "Output Directory",
      "description": "Output directory in stash",
      "defaultValue": "./"
    }
  ]
}