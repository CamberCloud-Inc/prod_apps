// OPTIMIZED CONFIGURATION FOR LARGE NODE
// Utilizes 64 CPUs and 320GB RAM effectively for scRNA-seq analysis

process {
    // Default resource allocation for standard processes
    cpus = 4
    memory = '16.GB'
    time = '6.h'
    
    // Quality control processes
    withName:FASTQC {
        cpus = 8
        memory = '32.GB'
        time = '4.h'
    }
    
    withName:MULTIQC {
        cpus = 4
        memory = '16.GB'
        time = '2.h'
    }
    
    withName:'.*:TRIMGALORE.*' {
        cpus = 8
        memory = '24.GB'
        time = '6.h'
    }
    
    // Alignment processes - most resource intensive
    withName:'.*:STARSOLO:.*' {
        cpus = 32  // Use half available CPUs for parallel alignment
        memory = '128.GB'  // Generous memory for genome indices
        time = '12.h'
    }
    
    withName:'.*:ALEVIN:.*' {
        cpus = 24
        memory = '96.GB'
        time = '8.h'
    }
    
    withName:'.*:KALLISTO_BUSTOOLS:.*' {
        cpus = 16
        memory = '64.GB'
        time = '6.h'
    }
    
    withName:'.*:CELLRANGER:.*' {
        cpus = 32
        memory = '128.GB'
        time = '16.h'
    }
    
    // scRNA-seq specific quantification processes
    withName:'.*:SIMPLEAF:.*' {
        cpus = 20
        memory = '80.GB'
        time = '8.h'
    }
    
    // Genome preparation processes
    withName:'.*:STAR_GENOMEGENERATE.*' {
        cpus = 24
        memory = '96.GB'
        time = '8.h'
    }
    
    withName:'.*:SALMON_INDEX.*' {
        cpus = 16
        memory = '48.GB'
        time = '4.h'
    }
    
    // Process labels optimized for large node
    withLabel:process_single { cpus = 2; memory = '8.GB' }
    withLabel:process_low { cpus = 4; memory = '16.GB' }
    withLabel:process_medium { cpus = 12; memory = '48.GB' }
    withLabel:process_high { cpus = 24; memory = '96.GB' }
    withLabel:process_long { cpus = 8; memory = '32.GB' }
    withLabel:process_high_memory { cpus = 16; memory = '128.GB' }
    
    // Error handling
    errorStrategy = 'retry'
    maxRetries = 2
}

// NO max_cpus, max_memory, max_time parameters - platform doesn't support them
// NO container overrides - let platform handle
// NO executor overrides - let platform handle