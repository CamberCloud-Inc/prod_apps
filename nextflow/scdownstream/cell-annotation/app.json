{
  "name": "scdownstream-cell-annotation",
  "title": "Single-Cell Cell Type Annotation",
  "description": "Automated cell type annotation for scRNA-seq data. Integrates multiple samples, performs clustering, and annotates cell types using reference databases.",
  "version": "1.0.0",
  "engineType": "NEXTFLOW",
  "command": "nextflow run nf-core/scdownstream --input ${input} --outdir ${outdir} -r dev ",
  "imageUrl": "https://raw.githubusercontent.com/nf-core/scdownstream/master/docs/images/nf-core-scdownstream_logo_light.png",
  "content": "<h2><strong>Automated Cell Type Annotation</strong></h2><p>Analyze already-quantified scRNA-seq data (from 10X, Drop-seq, etc.) with automated cell type identification. Integrates samples, performs quality control, clustering, and annotates cell populations.</p><h3><strong>Why Cell Type Annotation?</strong></h3><blockquote><ul><li><strong>Automated Identification</strong>: Reference-based annotation of cell types</li><li><strong>Multi-Sample Integration</strong>: Harmonize batch effects across experiments</li><li><strong>Quality Control</strong>: Filter low-quality cells and doublets</li><li><strong>Clustering</strong>: Unsupervised identification of cell populations</li><li><strong>Marker Genes</strong>: Identify defining features of each cluster</li><li><strong>Visualization</strong>: UMAP/t-SNE embeddings</li></ul></blockquote><h3><strong>Cell Type Annotation Methods</strong></h3><ul><li><strong>Reference-Based</strong>: Compare to annotated datasets (SingleR, Azimuth)</li><li><strong>Marker-Based</strong>: Known cell type markers (PanglaoDB, CellMarker)</li><li><strong>Automated</strong>: Machine learning classification</li><li><strong>Manual Curation</strong>: Expert review of marker expression</li></ul><h3><strong>Scientific Applications</strong></h3><ul><li><strong>Tissue Atlases</strong>: Comprehensive cell type catalogs</li><li><strong>Developmental Biology</strong>: Cell lineage identification</li><li><strong>Immunology</strong>: T cell, B cell, myeloid subsets</li><li><strong>Cancer</strong>: Tumor microenvironment composition</li><li><strong>Disease Modeling</strong>: Cell type-specific changes</li><li><strong>Drug Response</strong>: Cell type-specific effects</li></ul><h3><strong>Pipeline Features</strong></h3><ul><li><strong>QC Filtering</strong>: Remove low-quality cells, doublets</li><li><strong>Normalization</strong>: SCTransform or log-normalization</li><li><strong>Integration</strong>: Harmony, Seurat, or Scanorama</li><li><strong>Dimensionality Reduction</strong>: PCA, UMAP, t-SNE</li><li><strong>Clustering</strong>: Louvain or Leiden algorithms</li><li><strong>Annotation</strong>: Automated cell type assignment</li><li><strong>Marker Discovery</strong>: Differential expression per cluster</li><li><strong>Visualization</strong>: Interactive HTML reports</li></ul><h3><strong>Input Requirements</strong></h3><p>CSV samplesheet with columns:</p><ul><li><strong>sample</strong>: Sample name</li><li><strong>unfiltered</strong> or <strong>filtered</strong>: Path to h5ad/h5/rds/csv matrix</li></ul><p>Supports outputs from:</p><ul><li>10X CellRanger</li><li>nf-core/scrnaseq</li><li>STARsolo</li><li>Alevin</li><li>Kallisto</li></ul><h3><strong>Key Outputs</strong></h3><ul><li><strong>Integrated h5ad</strong>: Combined Scanpy object</li><li><strong>Annotated Clusters</strong>: Cell type labels</li><li><strong>UMAP/t-SNE</strong>: 2D embeddings</li><li><strong>Marker Genes</strong>: Top markers per cell type</li><li><strong>QC Report</strong>: HTML quality metrics</li><li><strong>Cell Type Proportions</strong>: Frequencies per sample</li></ul><blockquote><p><strong>Perfect for:</strong> Cell type discovery • Tissue atlases • Immune profiling • Cancer microenvironment • Multi-sample studies</p></blockquote>",
  "spec": [
    {
      "type": "Stash File",
      "label": "Sample Sheet",
      "name": "input",
      "description": "CSV with scRNA-seq matrices (h5ad, h5, rds, or csv)",
      "required": true,
      "restrictions": {
        "allow_files": true,
        "allow_folders": false,
        "allowed_file_types": [".csv"]
      }
    },
    {
      "type": "Stash File",
      "label": "Output Directory",
      "name": "outdir",
      "description": "Output directory",
      "defaultValue": "./scdownstream-annotation-results",
      "required": true,
      "restrictions": {
        "allow_files": false,
        "allow_folders": true
      }
    }
  ],
  "jobConfig": [
    {
      "type": "Select",
      "label": "Compute Resources",
      "name": "system_size",
      "hidden": false,
      "options": [
        {"label": "LARGE (Recommended)", "value": "large", "mapValue": {"nodeSize": "LARGE", "numNodes": 1, "withGpu": false}}
      ],
      "defaultValue": "large"
    }
  ],
  "tags": [
    {"name": "single-cell", "type": "field"},
    {"name": "cell-annotation", "type": "task"},
    {"name": "clustering", "type": "task"}
  ]
}
