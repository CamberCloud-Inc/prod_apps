{
  "name": "alleleexpression-ase-analysis",
  "title": "Allele-Specific Expression Analysis",
  "description": "Allele-specific expression (ASE) analysis pipeline using STAR-WASP alignment, UMI-tools deduplication, and phaser for haplotype phasing and ASE detection",
  "version": "1.0.0",
  "engineType": "NEXTFLOW",
  "command": "nextflow run nf-core/alleleexpression --input ${input} --outdir ${outdir} --genome ${genome} --chromosome ${chromosome} --beagle_ref ${beagle_ref} --beagle_map ${beagle_map} -r dev -profile singularity",
  "imageUrl": "https://raw.githubusercontent.com/nf-core/alleleexpression/dev/docs/images/nf-core-alleleexpression_logo_light.png",
  "content": "<h2><strong>Allele-Specific Expression Analysis</strong></h2><p>A comprehensive Nextflow pipeline for allele-specific expression (ASE) analysis using STAR-WASP for alignment, UMI-tools for deduplication, and phaser for haplotype phasing and ASE detection.</p><h3>Pipeline Features</h3><ul><li>STAR alignment with WASP mode for allele-specific mapping</li><li>UMI-based deduplication to remove PCR duplicates</li><li>Chromosome-specific analysis for focused processing</li><li>Beagle phasing integration for haplotype determination</li><li>Comprehensive QC reporting with MultiQC</li></ul><h3>Pipeline Steps</h3><ol><li>Input validation and VCF preparation</li><li>FastQC quality control for raw reads</li><li>STAR alignment with WASP filtering mode</li><li>WASP read filtering to remove mapping bias</li><li>UMI-based deduplication</li><li>BAM file sorting and indexing</li><li>VCF chromosome extraction</li><li>Beagle haplotype phasing</li><li>Haplotype-level expression analysis with phaser</li><li>Gene-level ASE detection</li><li>ASE gene extraction and reporting</li><li>MultiQC quality report generation</li></ol><h3>Required Inputs</h3><ul><li>Input samplesheet (CSV format with sample information)</li><li>Reference genome (FASTA) and annotation (GTF) files</li><li>STAR genome index directory</li><li>Beagle reference panel (VCF file)</li><li>Beagle genetic map file</li></ul><h3>Output Structure</h3><ul><li><strong>fastqc/</strong>: FastQC quality control reports</li><li><strong>star/</strong>: STAR alignment results</li><li><strong>wasp/</strong>: WASP-filtered BAM files</li><li><strong>umi/</strong>: UMI-deduplicated BAM files</li><li><strong>beagle/</strong>: Phased VCF files</li><li><strong>phaser/</strong>: Phaser haplotype analysis results</li><li><strong>ase/</strong>: Allele-specific expression results</li><li><strong>multiqc/</strong>: Comprehensive quality report</li></ul><p><strong>Note:</strong> This pipeline is currently under active development. Please refer to the <a href='https://nf-co.re/alleleexpression/dev/' target='_blank'>nf-core documentation</a> for the latest updates and usage information.</p>",
  "spec": [
    {
      "type": "Stash File",
      "label": "Input Samplesheet",
      "name": "input",
      "required": true,
      "helpText": "CSV file containing sample information with columns for sample name, FASTQ files, and VCF file paths",
      "restrictions": {
        "allow_files": true,
        "allowed_file_types": [".csv", ".tsv"]
      }
    },
    {
      "type": "Stash File",
      "label": "Output Directory",
      "name": "outdir",
      "defaultValue": "./alleleexpression-results",
      "required": true,
      "helpText": "Directory where pipeline results will be saved",
      "restrictions": {
        "allow_files": false,
        "allow_folders": true
      }
    },
    {
      "type": "String",
      "label": "Genome Reference",
      "name": "genome",
      "required": false,
      "helpText": "Name of iGenomes reference (e.g., GRCh38, GRCm39) or leave empty to specify custom genome files",
      "defaultValue": ""
    },
    {
      "type": "String",
      "label": "Chromosome",
      "name": "chromosome",
      "required": false,
      "helpText": "Specific chromosome to analyze (e.g., chr1, chr2). Leave empty to analyze all chromosomes",
      "defaultValue": ""
    },
    {
      "type": "Stash File",
      "label": "Beagle Reference Panel",
      "name": "beagle_ref",
      "required": true,
      "helpText": "Beagle reference panel VCF file for haplotype phasing",
      "restrictions": {
        "allow_files": true,
        "allowed_file_types": [".vcf", ".vcf.gz"]
      }
    },
    {
      "type": "Stash File",
      "label": "Beagle Genetic Map",
      "name": "beagle_map",
      "required": true,
      "helpText": "Beagle genetic map file for phasing accuracy",
      "restrictions": {
        "allow_files": true,
        "allowed_file_types": [".map", ".txt"]
      }
    }
  ],
  "jobConfig": [
    {
      "type": "Select",
      "label": "Resources",
      "name": "system_size",
      "options": [
        {
          "label": "MEDIUM",
          "value": "medium",
          "mapValue": {
            "nodeSize": "MEDIUM",
            "numNodes": 1,
            "withGpu": false
          }
        },
        {
          "label": "LARGE",
          "value": "large",
          "mapValue": {
            "nodeSize": "LARGE",
            "numNodes": 1,
            "withGpu": false
          }
        },
        {
          "label": "XLARGE",
          "value": "xlarge",
          "mapValue": {
            "nodeSize": "XLARGE",
            "numNodes": 1,
            "withGpu": false
          }
        }
      ],
      "defaultValue": "large"
    }
  ],
  "tags": [
    {"name": "alleleexpression", "type": "task"},
    {"name": "rnaseq", "type": "task"},
    {"name": "ase", "type": "task"},
    {"name": "genomics", "type": "task"}
  ]
}
