{
  "name": "proteinfamilies-protein-families",
  "title": "Protein Families Analysis",
  "description": "Generate and update protein families from amino acid sequences using clustering, alignment, and HMM generation",
  "version": "1.0.0",
  "engineType": "NEXTFLOW",
  "command": "nextflow run nf-core/proteinfamilies --input ${input} --outdir ${outdir} --clustering_tool ${clustering_tool} --alignment_tool ${alignment_tool} --trim_msa ${trim_msa} --remove_family_redundancy ${remove_family_redundancy} --remove_sequence_redundancy ${remove_sequence_redundancy} -profile docker -r 1.0.0",
  "imageUrl": "https://raw.githubusercontent.com/nf-core/proteinfamilies/master/docs/images/nf-core-proteinfamilies_logo_light.png",
  "content": "<h2><strong>Protein Families Analysis</strong></h2><p>A comprehensive bioinformatics pipeline for generating and updating protein families from amino acid sequences.</p><h3>Key Features</h3><ul><li><strong>Sequence Quality Check:</strong> Generates input amino acid sequence statistics using SeqKit</li><li><strong>Protein Clustering:</strong> Clusters sequences using MMseqs2 with configurable thresholds</li><li><strong>Multiple Sequence Alignment:</strong> Performs alignment with FAMSA or MAFFT</li><li><strong>HMM Generation:</strong> Creates family Hidden Markov Models for protein characterization</li><li><strong>Redundancy Removal:</strong> Optionally removes redundant families and sequences</li><li><strong>Family Updates:</strong> Supports updating existing protein families with new sequences</li></ul><h3>Input Requirements</h3><p>A CSV samplesheet containing:</p><ul><li>Sample name</li><li>FASTA file path with amino acid sequences</li><li>Optional: Existing HMM and MSA tarballs for family updates</li></ul><h3>Output</h3><p>The pipeline generates comprehensive protein family data including:</p><ul><li>Clustered protein families</li><li>Multiple sequence alignments</li><li>Hidden Markov Models</li><li>Family statistics and reports</li></ul><h3>Typical Use Cases</h3><ul><li>De novo protein family creation from sequence datasets</li><li>Updating existing protein family databases</li><li>Systematic organization and analysis of protein sequences</li><li>Comparative protein family studies</li></ul>",
  "spec": [
    {
      "type": "Stash File",
      "label": "Input Samplesheet",
      "name": "input",
      "required": true,
      "description": "CSV file with sample name, FASTA file path, and optional HMM/MSA tarballs",
      "restrictions": {
        "allow_files": true,
        "allowed_file_types": [".csv", ".tsv"]
      }
    },
    {
      "type": "Stash File",
      "label": "Output Directory",
      "name": "outdir",
      "defaultValue": "./proteinfamilies-results",
      "required": true,
      "description": "Directory for pipeline results including families, alignments, and HMMs",
      "restrictions": {
        "allow_files": false,
        "allow_folders": true
      }
    },
    {
      "type": "Select",
      "label": "Clustering Tool",
      "name": "clustering_tool",
      "description": "MMseqs2 clustering method: linclust (faster, for large datasets) or cluster (more sensitive)",
      "options": [
        {"label": "Linclust (Fast, for large datasets)", "value": "linclust"},
        {"label": "Cluster (Sensitive, for medium datasets)", "value": "cluster"}
      ],
      "defaultValue": "linclust",
      "required": false
    },
    {
      "type": "Select",
      "label": "Alignment Tool",
      "name": "alignment_tool",
      "description": "Multiple sequence alignment tool",
      "options": [
        {"label": "FAMSA (Recommended)", "value": "famsa"},
        {"label": "MAFFT", "value": "mafft"}
      ],
      "defaultValue": "famsa",
      "required": false
    },
    {
      "type": "Select",
      "label": "Trim MSA",
      "name": "trim_msa",
      "description": "Toggle MSA gap trimming using ClipKIT",
      "options": [
        {"label": "Yes", "value": "true"},
        {"label": "No", "value": "false"}
      ],
      "defaultValue": "true",
      "required": false
    },
    {
      "type": "Select",
      "label": "Remove Family Redundancy",
      "name": "remove_family_redundancy",
      "description": "Remove redundant families via hmmsearch",
      "options": [
        {"label": "Yes", "value": "true"},
        {"label": "No", "value": "false"}
      ],
      "defaultValue": "true",
      "required": false
    },
    {
      "type": "Select",
      "label": "Remove Sequence Redundancy",
      "name": "remove_sequence_redundancy",
      "description": "Remove redundant sequences via MMseqs2 clustering",
      "options": [
        {"label": "Yes", "value": "true"},
        {"label": "No", "value": "false"}
      ],
      "defaultValue": "true",
      "required": false
    }
  ],
  "jobConfig": [
    {
      "type": "Select",
      "label": "Resources",
      "name": "system_size",
      "options": [
        {
          "label": "LARGE",
          "value": "large",
          "mapValue": {
            "nodeSize": "LARGE",
            "numNodes": 1,
            "withGpu": false
          }
        }
      ],
      "defaultValue": "large"
    }
  ],
  "tags": [
    {"name": "proteinfamilies", "type": "task"},
    {"name": "bioinformatics", "type": "category"},
    {"name": "protein-analysis", "type": "category"},
    {"name": "sequence-analysis", "type": "category"}
  ]
}
