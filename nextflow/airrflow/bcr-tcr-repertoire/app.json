{
  "name": "airrflow-repertoire",
  "title": "B-cell/T-cell Receptor Repertoire Analysis (nf-core/airrflow)",
  "description": "Analyze adaptive immune receptor repertoires (AIRR) from BCR/TCR sequencing data using the Immcantation framework. Characterizes antibody and T-cell receptor diversity for immunology research, vaccine development, and cancer immunotherapy.",
  "version": "1.0.0",
  "engineType": "NEXTFLOW",
  "command": "nextflow run nf-core/airrflow --input ${input} --outdir ${outdir} --mode ${mode} -r 4.3.1 ",
  "imageUrl": "https://raw.githubusercontent.com/nf-core/airrflow/master/docs/images/nf-core-airrflow_logo_light.png",
  "content": "<h2><strong>Adaptive Immune Receptor Repertoire Analysis</strong></h2><p>The <strong>nf-core/airrflow</strong> pipeline analyzes B-cell and T-cell receptor (BCR/TCR) repertoires, revealing immune diversity and clonal expansion. Uses the Immcantation framework for comprehensive AIRR-seq analysis.</p><h3><strong>Scientific Applications</strong></h3><blockquote><ul><li><strong>Vaccine Development</strong>: Analyze antibody responses to vaccination</li><li><strong>Cancer Immunotherapy</strong>: Study T-cell responses to checkpoint inhibitors</li><li><strong>Autoimmune Disease</strong>: Characterize pathogenic B/T cell clones</li><li><strong>Infectious Disease</strong>: Track immune responses to infections</li><li><strong>Antibody Discovery</strong>: Identify therapeutic antibody candidates</li><li><strong>Transplant Immunology</strong>: Monitor immune reconstitution</li></ul></blockquote><h3><strong>Pipeline Features</strong></h3><ul><li><strong>V(D)J Annotation</strong>: Identify gene segments and CDR3 regions</li><li><strong>Clonal Analysis</strong>: Group related sequences into clones</li><li><strong>Diversity Metrics</strong>: Calculate repertoire diversity</li><li><strong>Lineage Trees</strong>: Reconstruct antibody evolution</li><li><strong>Quality Control</strong>: Comprehensive QC metrics</li></ul><h3><strong>Analysis Modes</strong></h3><ul><li><strong>Targeted BCR/TCR-seq</strong>: Amplicon-based sequencing</li><li><strong>Single-cell BCR/TCR</strong>: From 10x Genomics or similar</li><li><strong>Bulk sequencing</strong>: With or without UMIs</li></ul><h3><strong>Input Requirements</strong></h3><p>CSV samplesheet:</p><ul><li><code>sample</code>: Sample identifier</li><li><code>fastq_1</code>: Forward reads</li><li><code>fastq_2</code>: Reverse reads (if paired-end)</li></ul><h3><strong>Key Outputs</strong></h3><ul><li><strong>V(D)J Annotations</strong>: Gene usage and CDR3 sequences</li><li><strong>Clonal Assignments</strong>: Related sequences grouped</li><li><strong>Diversity Metrics</strong>: Shannon entropy, evenness</li><li><strong>Lineage Trees</strong>: Phylogenetic trees of clones</li></ul><blockquote><p><strong>Perfect for:</strong> Immunologists • Vaccine researchers • Cancer immunotherapy • Antibody discovery • Transplant immunology</p></blockquote>",
  "spec": [
    {
      "type": "Stash File",
      "label": "Sample Sheet",
      "name": "input",
      "description": "CSV with sample information",
      "required": true,
      "restrictions": {
        "allow_files": true,
        "allow_folders": false,
        "allowed_file_types": [".csv"]
      }
    },
    {
      "type": "Select",
      "label": "Sequencing Mode",
      "name": "mode",
      "description": "Type of AIRR sequencing data",
      "defaultValue": "fastq",
      "required": true,
      "options": [
        {"label": "Raw FASTQ (bulk or targeted)", "value": "fastq"},
        {"label": "Assembled sequences", "value": "assembled"}
      ]
    },
    {
      "type": "Stash File",
      "label": "Output Directory",
      "name": "outdir",
      "description": "Output directory",
      "defaultValue": "./airrflow-results",
      "required": true,
      "restrictions": {
        "allow_files": false,
        "allow_folders": true
      }
    }
  ],
  "jobConfig": [
    {
      "type": "Select",
      "label": "Compute Resources",
      "name": "system_size",
      "hidden": false,
      "options": [
        {"label": "MEDIUM (Recommended)", "value": "medium", "mapValue": {"nodeSize": "MEDIUM", "numNodes": 1, "withGpu": false}},
        {"label": "LARGE (Many samples)", "value": "large", "mapValue": {"nodeSize": "LARGE", "numNodes": 1, "withGpu": false}}
      ],
      "defaultValue": "medium"
    }
  ],
  "tags": [
    {"name": "immunology", "type": "field"},
    {"name": "airr", "type": "task"},
    {"name": "bcr-tcr", "type": "task"}
  ]
}
