{
  "name": "fetchngs-data-download",
  "title": "FetchNGS: Download Public Sequencing Data",
  "description": "Download raw FASTQ files and metadata from public databases (SRA/ENA/DDBJ/GEO). Automatically generates samplesheets compatible with nf-core pipelines.",
  "version": "1.0.0",
  "engineType": "NEXTFLOW",
  "command": "nextflow run nf-core/fetchngs --input ${input} --outdir ${outdir} --download_method ${download_method} -r 1.12.0 ",
  "imageUrl": "https://raw.githubusercontent.com/nf-core/fetchngs/master/docs/images/nf-core-fetchngs_logo_light.png",
  "content": "<h2><strong>FetchNGS: Public Data Download</strong></h2><p><strong>nf-core/fetchngs</strong> is a utility pipeline that downloads raw sequencing data and metadata from public repositories. Perfect for reproducing published studies, accessing reference datasets, or starting analysis with publicly available data.</p><h3><strong>Why Download Public Data?</strong></h3><ul><li><strong>Reproduce Published Studies</strong>: Re-analyze data from papers</li><li><strong>Meta-Analysis</strong>: Combine multiple studies</li><li><strong>Benchmarking</strong>: Test pipelines on known datasets</li><li><strong>Training</strong>: Learn with real data</li><li><strong>Discovery</strong>: Mine existing data for new insights</li><li><strong>Free Data</strong>: Millions of samples available</li></ul><h3><strong>Supported Databases</strong></h3><p><strong>SRA</strong> (Sequence Read Archive):</p><ul><li>NCBI's repository for raw sequencing data</li><li>Largest public sequencing database</li><li>Accession format: SRR/ERR/DRR#######</li></ul><p><strong>ENA</strong> (European Nucleotide Archive):</p><ul><li>EMBL-EBI's sequencing archive</li><li>Often faster download than SRA</li><li>Accession format: ERR#######</li></ul><p><strong>DDBJ</strong> (DNA Data Bank of Japan):</p><ul><li>Japan's sequencing archive</li><li>Part of International Nucleotide Sequence Database</li><li>Accession format: DRR#######</li></ul><p><strong>GEO</strong> (Gene Expression Omnibus):</p><ul><li>NCBI's gene expression repository</li><li>Links to SRA accessions</li><li>Accession format: GSE######, GSM######</li></ul><h3><strong>Pipeline Workflow</strong></h3><ol><li><strong>ID Resolution</strong>: Convert GEO/study IDs to run accessions</li><li><strong>Metadata Fetch</strong>: Query ENA API for sample information</li><li><strong>FASTQ Download</strong>: Retrieve raw sequencing files (FTP, Aspera, or sra-tools)</li><li><strong>Validation</strong>: Check MD5 checksums</li><li><strong>Samplesheet Generation</strong>: Create nf-core-compatible CSV</li><li><strong>QC Report</strong>: MultiQC summary of download</li></ol><h3><strong>Download Methods</strong></h3><p><strong>FTP</strong> (default):</p><ul><li>Reliable, no special software needed</li><li>Good for most users</li><li>Moderate speed</li></ul><p><strong>Aspera</strong>:</p><ul><li>Very fast downloads (10-100X faster)</li><li>Requires Aspera Connect installation</li><li>Recommended for large datasets</li></ul><p><strong>sra-tools</strong>:</p><ul><li>NCBI's official tools (fastq-dump, fasterq-dump)</li><li>Works when FTP/Aspera fail</li><li>Slower, less reliable</li></ul><h3><strong>Use Cases</strong></h3><p><strong>Reproduce Published Results</strong>:</p><ul><li>Find accessions in paper's methods</li><li>Download exact data used by authors</li><li>Re-run analysis with updated tools</li></ul><p><strong>Meta-Analysis Across Studies</strong>:</p><ul><li>Combine multiple SRA projects</li><li>Harmonize processing pipeline</li><li>Increase statistical power</li></ul><p><strong>Access Reference Datasets</strong>:</p><ul><li>1000 Genomes, TCGA, ENCODE, GTEx</li><li>Use as controls or training data</li><li>Benchmark your own samples</li></ul><p><strong>Educational Purposes</strong>:</p><ul><li>Real data for workshops, tutorials</li><li>Practice bioinformatics skills</li><li>Test new methods</li></ul><h3><strong>Example Accessions</strong></h3><blockquote><p><strong>Single Run</strong>:</p><ul><li><code>SRR11605097</code> - SARS-CoV-2 RNA-seq</li><li><code>ERR2020321</code> - Human WGS</li></ul><p><strong>Project/Study</strong>:</p><ul><li><code>PRJNA123456</code> - All runs from BioProject</li><li><code>GSE123456</code> - GEO series (RNA-seq, ChIP-seq, etc.)</li></ul><p><strong>Sample</strong>:</p><ul><li><code>SRS123456</code> - SRA sample (may have multiple runs)</li><li><code>GSM123456</code> - GEO sample</li></ul></blockquote><h3><strong>Automatic Samplesheet Generation</strong></h3><p>Pipeline creates ready-to-use samplesheets for:</p><ul><li><strong>nf-core/rnaseq</strong>: RNA-seq analysis</li><li><strong>nf-core/atacseq</strong>: ATAC-seq analysis</li><li><strong>nf-core/chipseq</strong>: ChIP-seq analysis</li><li><strong>nf-core/mag</strong>: Metagenomics</li><li><strong>nf-core/viralrecon</strong>: Viral genomics</li><li><strong>Custom format</strong>: Or use generic samplesheet</li></ul><p>Use <code>--nf_core_pipeline rnaseq</code> to generate compatible samplesheet</p><h3><strong>Database Access Tips</strong></h3><ul><li><strong>SRA vs ENA</strong>: ENA often has pre-converted FASTQs (faster)</li><li><strong>FTP mirrors</strong>: Pipeline uses ENA FTP (fastest for most locations)</li><li><strong>Retry logic</strong>: Automatically retries failed downloads</li><li><strong>Partial downloads</strong>: Use <code>--max_runs</code> to test with subset</li></ul><h3><strong>Finding Accessions</strong></h3><p><strong>From Publications</strong>:</p><ul><li>Check Methods or Data Availability sections</li><li>Look for \"SRA accession\", \"GEO accession\"</li><li>Often in supplementary materials</li></ul><p><strong>SRA Search</strong>:</p><ul><li>https://www.ncbi.nlm.nih.gov/sra</li><li>Search by organism, experiment type, keywords</li><li>Filter by sequencing platform, date, etc.</li></ul><p><strong>GEO Search</strong>:</p><ul><li>https://www.ncbi.nlm.nih.gov/geo/</li><li>Browse by DataSets, Profiles</li><li>Links to SRA data</li></ul><h3><strong>Storage Considerations</strong></h3><p>Typical file sizes:</p><ul><li><strong>RNA-seq</strong>: 2-10 GB per sample (20-50M reads)</li><li><strong>WGS</strong>: 20-100 GB per sample (30X coverage)</li><li><strong>ChIP-seq</strong>: 5-20 GB per sample</li><li><strong>scRNA-seq</strong>: 1-5 GB per cell (10X)</li></ul><p>Plan storage accordingly - whole studies can be TBs!</p><h3><strong>Input Requirements</strong></h3><p>CSV file with accession IDs (one per line):</p><pre><code>SRR11605097\nSRR11605098\nGSM4432381\nPRJNA123456\n</code></pre><p>Or as CSV with column header:</p><pre><code>id\nSRR11605097\nSRR11605098\n</code></pre><h3><strong>Key Outputs</strong></h3><ul><li><strong>FASTQ Files</strong>: Downloaded raw sequencing data</li><li><strong>Samplesheet CSV</strong>: Ready for nf-core pipelines</li><li><strong>Metadata</strong>: Sample information, run statistics</li><li><strong>MD5 Checksums</strong>: For data integrity verification</li><li><strong>QC Report</strong>: Download statistics, file sizes</li></ul><h3><strong>Common Issues & Solutions</strong></h3><p><strong>Download Failures</strong>:</p><ul><li>Try different download method (FTP → Aspera)</li><li>Check if accession exists and is public</li><li>Some data embargoed for 6-12 months after submission</li></ul><p><strong>Slow Downloads</strong>:</p><ul><li>Use Aspera for 10-100X speedup</li><li>Download during off-peak hours</li><li>Use ENA mirror (automatically selected)</li></ul><p><strong>Missing Metadata</strong>:</p><ul><li>Some SRA entries have minimal metadata</li><li>Check original GEO entry for more info</li></ul><blockquote><p><strong>Perfect for:</strong> Public data access • Reproducing studies • Meta-analysis • Training datasets • Benchmarking • Free sequencing data</p></blockquote>",
  "spec": [
    {
      "type": "Stash File",
      "label": "Accession IDs File",
      "name": "input",
      "description": "Text or CSV file with SRA/ENA/GEO accession IDs",
      "required": true,
      "restrictions": {
        "allow_files": true,
        "allow_folders": false,
        "allowed_file_types": [".txt", ".csv"]
      }
    },
    {
      "type": "Select",
      "label": "Download Method",
      "name": "download_method",
      "description": "Method for downloading FASTQ files",
      "defaultValue": "ftp",
      "required": true,
      "options": [
        {"label": "FTP (Reliable)", "value": "ftp"},
        {"label": "Aspera (Fastest)", "value": "aspera"},
        {"label": "SRA Tools (Fallback)", "value": "sratools"}
      ]
    },
    {
      "type": "Stash File",
      "label": "Output Directory",
      "name": "outdir",
      "description": "Output directory",
      "defaultValue": "./fetchngs-results",
      "required": true,
      "restrictions": {
        "allow_files": false,
        "allow_folders": true
      }
    }
  ],
  "jobConfig": [
    {
      "type": "Select",
      "label": "Compute Resources",
      "name": "system_size",
      "hidden": false,
      "options": [
        {"label": "MEDIUM (Recommended)", "value": "medium", "mapValue": {"nodeSize": "MEDIUM", "numNodes": 1, "withGpu": false}},
        {"label": "SMALL (For few samples)", "value": "small", "mapValue": {"nodeSize": "SMALL", "numNodes": 1, "withGpu": false}}
      ],
      "defaultValue": "medium"
    }
  ],
  "tags": [
    {"name": "data-download", "type": "field"},
    {"name": "public-data", "type": "task"},
    {"name": "sra-ena", "type": "task"}
  ]
}
