{
  "name": "bacterial_genome_assembly",
  "title": "Nanoseq: Bacterial Genome Assembly",
  "description": "De novo bacterial genome assembly from Oxford Nanopore long reads using Flye assembler. Optimized for bacterial isolate sequencing with automatic quality control, assembly, polishing, and annotation. Returns complete genomes with quality metrics and annotations.",
  "content": "Assemble high-quality bacterial genomes from Oxford Nanopore sequencing data. This workflow uses the Flye assembler (via nf-core/bacass) optimized for bacterial isolates, with automatic read QC, assembly, and genome annotation. Ideal for microbiologists performing whole-genome sequencing of bacterial cultures.",
  "imageUrl": "https://raw.githubusercontent.com/nf-core/bacass/master/docs/images/nf-core-bacass_logo_light.png",
  "command": "rm -rf prod_apps && git clone git@github.com:CamberCloud-Inc/prod_apps.git && cd ./prod_apps/nextflow/nanoseq/bacterial-genome-assembly/ && bash run_assembly.sh",
  "engineType": "NEXTFLOW",
  "jobConfig": [
    {
      "type": "Select",
      "label": "System Size",
      "name": "system_size",
      "hidden": true,
      "description": "Select compute resources. Start with XSMALL for testing, scale up for production data.",
      "options": [
        {
          "label": "XSMALL (4 CPUs, 15GB RAM) - Testing/nf-core test data",
          "value": "xsmall",
          "mapValue": {
            "nodeSize": "XSMALL",
            "numNodes": 1,
            "withGpu": false
          }
        },
        {
          "label": "SMALL (8 CPUs, 30GB RAM) - Small datasets (1-3 samples)",
          "value": "small",
          "mapValue": {
            "nodeSize": "SMALL",
            "numNodes": 1,
            "withGpu": false
          }
        },
        {
          "label": "MEDIUM (32 CPUs, 120GB RAM) - Standard datasets (5-20 samples)",
          "value": "medium",
          "mapValue": {
            "nodeSize": "MEDIUM",
            "numNodes": 1,
            "withGpu": false
          }
        },
        {
          "label": "LARGE (64 CPUs, 360GB RAM) - Large datasets (20-50 samples)",
          "value": "large",
          "mapValue": {
            "nodeSize": "LARGE",
            "numNodes": 1,
            "withGpu": false
          }
        }
      ],
      "defaultValue": "xsmall"
    }
  ],
  "spec": [
    {
      "label": "Sample Sheet",
      "name": "input",
      "description": "CSV samplesheet containing sample information. Required columns: ID (sample name), LongFastQ (path to ONT FASTQ file), GenomeSize (estimated genome size in bp, e.g., 5000000 for typical bacteria). Example: sample1,s3://bucket/sample1.fastq.gz,5000000",
      "defaultValue": [],
      "hidden": false,
      "required": true,
      "disabled": false,
      "type": "Multi Stash File",
      "placeholder": "Upload samplesheet.csv"
    },
    {
      "label": "Output Directory",
      "name": "outdir",
      "description": "Directory where results will be saved. Will contain assembled genomes, QC reports, and annotations.",
      "defaultValue": "/camber_outputs",
      "hidden": false,
      "required": false,
      "disabled": false,
      "type": "Input"
    },
    {
      "label": "Assembler",
      "name": "assembler",
      "description": "Genome assembler to use. Dragonflye uses Flye (recommended for ONT), Unicycler for hybrid assembly, Miniasm for fast draft assemblies.",
      "defaultValue": "dragonflye",
      "hidden": false,
      "required": false,
      "disabled": false,
      "type": "Radio",
      "options": [
        {
          "label": "Dragonflye (Flye - High quality, recommended)",
          "value": "dragonflye"
        },
        {
          "label": "Unicycler (Hybrid assembly)",
          "value": "unicycler"
        },
        {
          "label": "Miniasm (Fast draft)",
          "value": "miniasm"
        }
      ]
    },
    {
      "label": "Assembly Type",
      "name": "assembly_type",
      "description": "Type of sequencing data. 'long' for ONT-only, 'short' for Illumina-only, 'hybrid' for both.",
      "defaultValue": "long",
      "hidden": false,
      "required": false,
      "disabled": false,
      "type": "Radio",
      "options": [
        {
          "label": "Long reads only (Oxford Nanopore)",
          "value": "long"
        },
        {
          "label": "Short reads only (Illumina)",
          "value": "short"
        },
        {
          "label": "Hybrid (ONT + Illumina)",
          "value": "hybrid"
        }
      ]
    },
    {
      "label": "Skip Kraken2 Contamination Check",
      "name": "skip_kraken2",
      "description": "Skip Kraken2 contamination screening. Enable to speed up analysis if samples are known to be pure cultures.",
      "defaultValue": true,
      "hidden": false,
      "required": false,
      "disabled": false,
      "type": "Checkbox"
    },
    {
      "label": "Skip Genome Polishing",
      "name": "skip_polish",
      "description": "Skip Medaka polishing step. Not recommended unless reads are already high quality (Q20+).",
      "defaultValue": false,
      "hidden": false,
      "required": false,
      "disabled": false,
      "type": "Checkbox"
    },
    {
      "label": "Skip Prokka Annotation",
      "name": "skip_prokka",
      "description": "Skip genome annotation with Prokka. Enable to speed up if only assembly is needed.",
      "defaultValue": false,
      "hidden": false,
      "required": false,
      "disabled": false,
      "type": "Checkbox"
    },
    {
      "label": "Skip Adapter Trimming",
      "name": "skip_adapter_trimming",
      "description": "Skip adapter removal with Porechop. Enable if reads were already trimmed.",
      "defaultValue": false,
      "hidden": false,
      "required": false,
      "disabled": false,
      "type": "Checkbox"
    },
    {
      "label": "Prokka Genus",
      "name": "prokka_genus",
      "description": "Genus name for Prokka annotation (e.g., Escherichia, Staphylococcus). Improves annotation accuracy.",
      "defaultValue": "",
      "hidden": false,
      "required": false,
      "disabled": false,
      "type": "Input",
      "placeholder": "e.g., Escherichia"
    },
    {
      "label": "Prokka Species",
      "name": "prokka_species",
      "description": "Species name for Prokka annotation (e.g., coli, aureus). Used with genus for better annotation.",
      "defaultValue": "",
      "hidden": false,
      "required": false,
      "disabled": false,
      "type": "Input",
      "placeholder": "e.g., coli"
    },
    {
      "label": "Minimum Contig Length",
      "name": "min_contig_length",
      "description": "Minimum contig length to include in final assembly (bp). Filters out short, low-quality contigs.",
      "defaultValue": "1000",
      "hidden": false,
      "required": false,
      "disabled": false,
      "type": "Input"
    },
    {
      "label": "Email Notification",
      "name": "email",
      "description": "Email address to receive completion notification with summary report.",
      "defaultValue": "",
      "hidden": false,
      "required": false,
      "disabled": false,
      "type": "Input",
      "placeholder": "your.email@example.com"
    },
    {
      "label": "MultiQC Report Title",
      "name": "multiqc_title",
      "description": "Custom title for the MultiQC quality control report.",
      "defaultValue": "Bacterial Genome Assembly Report",
      "hidden": false,
      "required": false,
      "disabled": false,
      "type": "Input"
    },
    {
      "label": "Save Trimmed Reads",
      "name": "save_trimmed",
      "description": "Save adapter-trimmed reads to output directory. Useful for downstream analyses.",
      "defaultValue": false,
      "hidden": false,
      "required": false,
      "disabled": false,
      "type": "Checkbox"
    },
    {
      "label": "Save Assembly Graph",
      "name": "save_assembly_graphs",
      "description": "Save assembly graph files (GFA format) for visualization and analysis.",
      "defaultValue": false,
      "hidden": false,
      "required": false,
      "disabled": false,
      "type": "Checkbox"
    },
    {
      "label": "Max CPUs",
      "name": "max_cpus",
      "description": "Maximum number of CPUs to use per process.",
      "defaultValue": "16",
      "hidden": true,
      "required": false,
      "disabled": false,
      "type": "Input"
    },
    {
      "label": "Max Memory",
      "name": "max_memory",
      "description": "Maximum memory to allocate (e.g., 60.GB).",
      "defaultValue": "60.GB",
      "hidden": true,
      "required": false,
      "disabled": false,
      "type": "Input"
    },
    {
      "label": "Max Time",
      "name": "max_time",
      "description": "Maximum time for any single process (e.g., 48.h).",
      "defaultValue": "48.h",
      "hidden": true,
      "required": false,
      "disabled": false,
      "type": "Input"
    }
  ],
  "tags": [
    {
      "id": "fb1ee42a-629a-4d99-9e7f-1da3c5f7a691",
      "name": "biology",
      "type": "field"
    },
    {
      "id": "6e4e74a4-560e-4674-95c3-60fe895b8c91",
      "name": "genomics",
      "type": "subfield"
    },
    {
      "id": "831477f4-f572-4e27-af83-037661489800",
      "name": "analysis",
      "type": "task"
    }
  ]
}