// nf-core/spatialvi configuration for Camber platform
// Standard 10x Visium spatial transcriptomics analysis

process {
    // Conservative resource allocation for XSMALL testing
    withLabel:process_single {
        cpus   = { 1 * task.attempt }
        memory = { 4.GB * task.attempt }
        time   = { 2.h * task.attempt }
    }

    withLabel:process_low {
        cpus   = { 2 * task.attempt }
        memory = { 8.GB * task.attempt }
        time   = { 4.h * task.attempt }
    }

    withLabel:process_medium {
        cpus   = { 4 * task.attempt }
        memory = { 12.GB * task.attempt }
        time   = { 8.h * task.attempt }
    }

    withLabel:process_high {
        cpus   = { 8 * task.attempt }
        memory = { 24.GB * task.attempt }
        time   = { 16.h * task.attempt }
    }

    withLabel:process_long {
        time   = { 24.h * task.attempt }
    }

    withLabel:process_high_memory {
        memory = { 32.GB * task.attempt }
    }

    // Error handling
    errorStrategy = 'retry'
    maxRetries = 2
}

// Container configuration for Camber platform
singularity {
    enabled = true
    autoMounts = true
}

docker {
    enabled = false  // CRITICAL: Disable Docker
}

// Default parameters for standard Visium analysis
params {
    // QC thresholds
    min_counts = 5
    min_genes = 3

    // Clustering
    cluster_resolution = 0.5
}