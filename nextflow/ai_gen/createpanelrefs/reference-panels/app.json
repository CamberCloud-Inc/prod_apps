{
    "name": "createpanelrefs-reference-panels",
    "title": "CNV & Variant Analysis References",
    "description": "Create Panel of Normals and genomic reference models for CNV detection and somatic variant calling. Build reference panels for CNVKIT, GATK Germline CNV Caller, GENS, and Mutect2 from normal sample cohorts. Samplesheet format: `sample,bam,bai,cram,crai`",
    "version": "dev",
    "engineType": "NEXTFLOW",
    "command": "nextflow run nf-core/createpanelrefs --input ${input} --outdir ${outdir} --tools ${tools} -r dev",
    "imageUrl": "https://raw.githubusercontent.com/nf-core/createpanelrefs/master/docs/images/nf-core-createpanelrefs_logo_light.png",
    "content": "<h1 class=\"heading-node\">Panel of Normals Builder: CNV & Variant Analysis References</h1><p class=\"text-node\"><strong>Create High-Quality Reference Panels for Copy Number and Somatic Variant Detection</strong></p><p class=\"text-node\">The nf-core/createpanelrefs pipeline generates Panel of Normals (PoN) and genomic reference models essential for accurate CNV detection and somatic variant calling. By aggregating normal samples, it creates baseline references that enable sensitive detection of true variants while filtering technical artifacts and germline events.</p><img src=\"https://raw.githubusercontent.com/nf-core/createpanelrefs/master/docs/images/nf-core-createpanelrefs_logo_light.png\" alt=\"nf-core/createpanelrefs\" width=\"400\" height=\"200\"><h2 class=\"heading-node\">What is a Panel of Normals?</h2><p class=\"text-node\">A <strong>Panel of Normals (PoN)</strong> is a collection of normal samples processed together to establish baseline patterns of technical variation, sequencing artifacts, and germline variants. This reference enables variant callers to distinguish true somatic events from noise.</p><h3 class=\"heading-node\">Why You Need a Panel of Normals</h3><ul class=\"list-node\"><li><p class=\"text-node\"><strong>Artifact Filtering:</strong> Remove recurrent technical artifacts and mapping errors</p></li><li><p class=\"text-node\"><strong>Germline Subtraction:</strong> Filter common germline variants from somatic calls</p></li><li><p class=\"text-node\"><strong>CNV Baseline:</strong> Establish normal copy number profiles for comparison</p></li><li><p class=\"text-node\"><strong>Improved Specificity:</strong> Reduce false positive variant calls</p></li><li><p class=\"text-node\"><strong>Sequencing Platform Matching:</strong> Account for platform-specific biases</p></li></ul><h2 class=\"heading-node\">Supported Analysis Tools</h2><h3 class=\"heading-node\">1. CNVKIT - Copy Number Variation Detection</h3><p class=\"text-node\"><strong>What it generates:</strong> Reference profiles for tumor vs. normal CNV analysis</p><ul class=\"list-node\"><li><p class=\"text-node\">Pooled normal reference for CNV baseline</p></li><li><p class=\"text-node\">Coverage profiles and bias corrections</p></li><li><p class=\"text-node\">Target and antitarget region statistics</p></li><li><p class=\"text-node\"><strong>Input requirement:</strong> BAM alignment files</p></li><li><p class=\"text-node\"><strong>Best for:</strong> Targeted sequencing, exome, and whole genome CNV detection</p></li></ul><h3 class=\"heading-node\">2. GATK Germline CNV Caller - Germline Copy Number Analysis</h3><p class=\"text-node\"><strong>What it generates:</strong> Contig ploidy models and CNV caller models</p><ul class=\"list-node\"><li><p class=\"text-node\">Read count statistics across genomic intervals</p></li><li><p class=\"text-node\">Contig ploidy priors for sex chromosomes and autosomes</p></li><li><p class=\"text-node\">Denoising models for technical variation</p></li><li><p class=\"text-node\"><strong>Input requirement:</strong> BAM or CRAM files (mixed formats supported)</p></li><li><p class=\"text-node\"><strong>Best for:</strong> Clinical germline CNV detection, rare disease diagnostics</p></li></ul><h3 class=\"heading-node\">3. GENS - Germline CNV Detection</h3><p class=\"text-node\"><strong>What it generates:</strong> Read count panels for germline CNV calling</p><ul class=\"list-node\"><li><p class=\"text-node\">HDF5 format read count data</p></li><li><p class=\"text-node\">TSV format panel statistics</p></li><li><p class=\"text-node\">Coverage normalization profiles</p></li><li><p class=\"text-node\"><strong>Best for:</strong> Germline CNV analysis in research and clinical settings</p></li></ul><h3 class=\"heading-node\">4. Mutect2 - Somatic SNV and Indel Detection</h3><p class=\"text-node\"><strong>What it generates:</strong> Panel of Normals VCF for somatic variant filtering</p><ul class=\"list-node\"><li><p class=\"text-node\">Genomic database workspace with recurrent artifacts</p></li><li><p class=\"text-node\">VCF file of common technical and germline variants</p></li><li><p class=\"text-node\">Site-specific filtering resources</p></li><li><p class=\"text-node\"><strong>Best for:</strong> Tumor-normal somatic variant calling, cancer genomics</p></li></ul><h2 class=\"heading-node\">Input Requirements</h2><h3 class=\"heading-node\">Samplesheet Format</h3><p class=\"text-node\">Create a CSV file listing all normal samples to include in the panel:</p><pre class=\"block-node\"><code>sample,bam,bai,cram,crai\nnormal_001,normal_001.bam,normal_001.bam.bai,,\nnormal_002,normal_002.bam,normal_002.bam.bai,,\nnormal_003,,,normal_003.cram,normal_003.cram.crai\nnormal_004,normal_004.bam,,,\nnormal_005,,,normal_005.cram,normal_005.cram.crai</code></pre><p class=\"text-node\"><strong>Column Details:</strong></p><ul class=\"list-node\"><li><p class=\"text-node\"><code class=\"inline\" spellcheck=\"false\">sample</code>: Unique sample identifier (patient ID, normal control ID)</p></li><li><p class=\"text-node\"><code class=\"inline\" spellcheck=\"false\">bam</code>: Path to BAM alignment file (or leave empty if using CRAM)</p></li><li><p class=\"text-node\"><code class=\"inline\" spellcheck=\"false\">bai</code>: Path to BAM index (.bai) - optional, can be auto-detected</p></li><li><p class=\"text-node\"><code class=\"inline\" spellcheck=\"false\">cram</code>: Path to CRAM alignment file (or leave empty if using BAM)</p></li><li><p class=\"text-node\"><code class=\"inline\" spellcheck=\"false\">crai</code>: Path to CRAM index (.crai) - optional, can be auto-detected</p></li></ul><p class=\"text-node\"><strong>Important Notes:</strong></p><ul class=\"list-node\"><li><p class=\"text-node\"><strong>Each row must have either BAM or CRAM</strong> (not both, one format per sample)</p></li><li><p class=\"text-node\"><strong>Mixed formats allowed:</strong> Some samples can be BAM, others CRAM (GATK tools only)</p></li><li><p class=\"text-node\"><strong>CNVKIT requires BAM files only</strong> - use BAM column for CNVKIT panels</p></li><li><p class=\"text-node\"><strong>Index files:</strong> Can be omitted if located next to alignment files with standard naming</p></li><li><p class=\"text-node\"><strong>Normal samples only:</strong> Use matched normal or unrelated healthy control samples</p></li></ul><h3 class=\"heading-node\">Sample Selection Best Practices</h3><ul class=\"list-node\"><li><p class=\"text-node\"><strong>Minimum samples:</strong> At least 30-40 normal samples recommended</p></li><li><p class=\"text-node\"><strong>Platform matching:</strong> Use samples from the same sequencing platform and protocol</p></li><li><p class=\"text-node\"><strong>Library prep matching:</strong> Match capture kit, library prep method to your test samples</p></li><li><p class=\"text-node\"><strong>Quality control:</strong> Pre-filter for high-quality, well-covered samples</p></li><li><p class=\"text-node\"><strong>Diversity:</strong> Include diverse ancestry backgrounds when possible</p></li></ul><h2 class=\"heading-node\">Key Pipeline Features</h2><ul class=\"list-node\"><li><p class=\"text-node\"><strong>Quality Control:</strong> FastQC analysis for input quality assessment</p></li><li><p class=\"text-node\"><strong>Multiple Tool Support:</strong> Build panels for all major CNV and variant callers</p></li><li><p class=\"text-node\"><strong>Flexible Configuration:</strong> Custom intervals, targets, reference genomes</p></li><li><p class=\"text-node\"><strong>Comprehensive Reporting:</strong> MultiQC reports with statistics and performance metrics</p></li><li><p class=\"text-node\"><strong>Containerized:</strong> Docker/Singularity support for reproducibility</p></li></ul><h2 class=\"heading-node\">Comprehensive Output Files</h2><h3 class=\"heading-node\">GATK Germline CNV Caller Outputs</h3><ul class=\"list-node\"><li><p class=\"text-node\"><strong>Contig ploidy models:</strong> Ploidy priors for chromosomes</p></li><li><p class=\"text-node\"><strong>CNV caller models:</strong> Trained models for CNV detection</p></li><li><p class=\"text-node\"><strong>Read count matrices:</strong> Interval-level coverage statistics</p></li><li><p class=\"text-node\"><strong>Denoising models:</strong> Technical variation profiles</p></li></ul><h3 class=\"heading-node\">CNVKIT Outputs</h3><ul class=\"list-node\"><li><p class=\"text-node\"><strong>Reference .cnn file:</strong> Pooled normal reference profile</p></li><li><p class=\"text-node\"><strong>Coverage statistics:</strong> Target and antitarget coverage</p></li><li><p class=\"text-node\"><strong>Bias corrections:</strong> GC and mappability adjustments</p></li></ul><h3 class=\"heading-node\">GENS Outputs</h3><ul class=\"list-node\"><li><p class=\"text-node\"><strong>HDF5 read counts:</strong> Compressed count matrices</p></li><li><p class=\"text-node\"><strong>TSV panel statistics:</strong> Human-readable coverage data</p></li><li><p class=\"text-node\"><strong>Panel of normals files:</strong> Reference baseline for CNV calling</p></li></ul><h3 class=\"heading-node\">Mutect2 Outputs</h3><ul class=\"list-node\"><li><p class=\"text-node\"><strong>Panel of Normals VCF:</strong> Filtered variant list for somatic calling</p></li><li><p class=\"text-node\"><strong>Genomic database workspace:</strong> GATK GenomicsDB format</p></li><li><p class=\"text-node\"><strong>Site statistics:</strong> Variant frequency and quality metrics</p></li></ul><h3 class=\"heading-node\">Quality Control Reports</h3><ul class=\"list-node\"><li><p class=\"text-node\"><strong>MultiQC HTML report:</strong> Comprehensive quality metrics</p></li><li><p class=\"text-node\"><strong>Sample statistics:</strong> Per-sample coverage and quality</p></li><li><p class=\"text-node\"><strong>Pipeline execution reports:</strong> Software versions and parameters</p></li></ul><h2 class=\"heading-node\">Scientific Applications</h2><h3 class=\"heading-node\">Cancer Genomics</h3><ul class=\"list-node\"><li><p class=\"text-node\"><strong>Somatic Variant Calling:</strong> Mutect2 PoN for tumor-normal analysis</p></li><li><p class=\"text-node\"><strong>Copy Number Analysis:</strong> CNVKIT references for tumor CNV detection</p></li><li><p class=\"text-node\"><strong>Liquid Biopsy:</strong> High-sensitivity panels for ctDNA analysis</p></li></ul><h3 class=\"heading-node\">Clinical Diagnostics</h3><ul class=\"list-node\"><li><p class=\"text-node\"><strong>Germline CNV Detection:</strong> GATK Germline CNV Caller panels for rare disease</p></li><li><p class=\"text-node\"><strong>Carrier Screening:</strong> CNV reference panels for clinical testing</p></li><li><p class=\"text-node\"><strong>Prenatal Testing:</strong> Copy number baseline for NIPT analysis</p></li></ul><h3 class=\"heading-node\">Research Applications</h3><ul class=\"list-node\"><li><p class=\"text-node\"><strong>Population Studies:</strong> CNV discovery in large cohorts</p></li><li><p class=\"text-node\"><strong>Precision Medicine:</strong> Patient-specific variant filtering</p></li><li><p class=\"text-node\"><strong>Method Development:</strong> Benchmarking variant callers</p></li></ul><h2 class=\"heading-node\">Workflow Overview</h2><ol class=\"list-node\"><li><p class=\"text-node\"><strong>Input Validation:</strong> Check samplesheet format and file existence</p></li><li><p class=\"text-node\"><strong>Quality Control:</strong> FastQC assessment of input alignments</p></li><li><p class=\"text-node\"><strong>Read Counting:</strong> Collect coverage statistics across intervals</p></li><li><p class=\"text-node\"><strong>Model Training:</strong> Build tool-specific reference models</p></li><li><p class=\"text-node\"><strong>Panel Generation:</strong> Create final Panel of Normals files</p></li><li><p class=\"text-node\"><strong>Reporting:</strong> Generate comprehensive MultiQC summary</p></li></ol><h2 class=\"heading-node\">Best Practices</h2><ul class=\"list-node\"><li><p class=\"text-node\"><strong>Sample Size:</strong> Minimum 30-40 normals, 100+ recommended for optimal filtering</p></li><li><p class=\"text-node\"><strong>Platform Consistency:</strong> Use same sequencer, chemistry, and protocols</p></li><li><p class=\"text-node\"><strong>Capture Kit Matching:</strong> Match exome/panel capture to your test samples</p></li><li><p class=\"text-node\"><strong>Quality Thresholds:</strong> Pre-filter low-quality or low-coverage samples</p></li><li><p class=\"text-node\"><strong>Regular Updates:</strong> Rebuild panels as more normal samples become available</p></li><li><p class=\"text-node\"><strong>Versioning:</strong> Track panel versions and document sample composition</p></li></ul><h2 class=\"heading-node\">Technical Requirements</h2><ul class=\"list-node\"><li><p class=\"text-node\"><strong>Reference Genome:</strong> Matching FASTA file for alignment reference</p></li><li><p class=\"text-node\"><strong>Interval Lists:</strong> BED or interval_list files for targeted sequencing</p></li><li><p class=\"text-node\"><strong>Compute Resources:</strong> Large memory recommended (100+ GB for whole genome)</p></li><li><p class=\"text-node\"><strong>Storage:</strong> Sufficient space for intermediate and final panel files</p></li></ul><p class=\"text-node\"><strong>Perfect for:</strong> Cancer genomics \u2022 Clinical diagnostics \u2022 CNV detection \u2022 Somatic variant calling \u2022 Germline analysis \u2022 Reference panel generation \u2022 Quality control</p><p class=\"text-node\">Built with <a class=\"link\" href=\"https://www.nextflow.io/\" target=\"_blank\">Nextflow</a> \u2022 Powered by <a class=\"link\" href=\"https://nf-co.re/createpanelrefs\" target=\"_blank\">nf-core/createpanelrefs</a> \u2022 Containerized execution \u2022 Production-ready</p>",
    "spec": [
        {
            "type": "Stash File",
            "label": "Input Samplesheet",
            "name": "input",
            "required": true,
            "restrictions": {
                "allow_files": true,
                "allowed_file_types": [
                    ".csv",
                    ".tsv"
                ]
            },
            "description": "CSV samplesheet with columns: sample, bam, bai, cram, crai. List all normal samples for panel creation."
        },
        {
            "type": "Input",
            "label": "Tools",
            "name": "tools",
            "required": true,
            "defaultValue": "germlinecnvcaller",
            "description": "Comma-separated list of tools: cnvkit, germlinecnvcaller, gens, mutect2"
        },
        {
            "type": "Stash File",
            "label": "Output Directory",
            "name": "outdir",
            "defaultValue": "./createpanelrefs-results",
            "required": true,
            "restrictions": {
                "allow_files": false,
                "allow_folders": true
            },
            "description": "Output directory for Panel of Normals and reference models"
        }
    ],
    "jobConfig": [
        {
            "type": "Select",
            "label": "Resources",
            "name": "system_size",
            "options": [
                {
                    "label": "LARGE (64 CPUs, 360GB RAM) - Recommended",
                    "value": "large",
                    "mapValue": {
                        "nodeSize": "LARGE",
                        "numNodes": 1,
                        "withGpu": false
                    }
                },
                {
                    "label": "XLARGE (96 CPUs, 540GB RAM) - Large cohorts",
                    "value": "xlarge",
                    "mapValue": {
                        "nodeSize": "XLARGE",
                        "numNodes": 1,
                        "withGpu": false
                    }
                }
            ],
            "defaultValue": "large"
        }
    ],
    "tags": [
        {
            "id": "fb1ee42a-629a-4d99-9e7f-1da3c5f7a691",
            "name": "biology",
            "type": "field"
        },
        {
            "id": "6e4e74a4-560e-4674-95c3-60fe895b8c91",
            "name": "genomics",
            "type": "subfield"
        },
        {
            "id": "831477f4-f572-4e27-af83-037661489800",
            "name": "analysis",
            "type": "task"
        }
    ]
}