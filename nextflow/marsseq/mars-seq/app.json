{
  "name": "marsseq-mars-seq",
  "title": "MARS-Seq Single-Cell RNA-seq Analysis",
  "description": "MARS-seq v2.0 preprocessing pipeline for plate-based single-cell RNA sequencing with RNA velocity analysis",
  "version": "1.0.3",
  "engineType": "NEXTFLOW",
  "command": "nextflow run nf-core/marsseq -profile docker --input ${input} --outdir ${outdir} --genome ${genome} ${velocity} ${build_references}",
  "imageUrl": "https://raw.githubusercontent.com/nf-core/marsseq/master/docs/images/nf-core-marsseq_logo_light.png",
  "content": "<h2><strong>MARS-Seq Single-Cell RNA-seq Pipeline</strong></h2><p>A comprehensive bioinformatics pipeline for preprocessing single-cell RNA sequencing data from MARS-seq v2.0 experiments.</p><h3>Key Features</h3><ul><li><strong>Plate-Based scRNA-seq Processing:</strong> Designed specifically for MARS-seq v2.0 protocol, a plate-based technique that can be combined with FACS to study rare cell populations</li><li><strong>RNA Velocity Analysis:</strong> Built-in support for RNA velocity workflows using StarSolo to study cell dynamics and developmental trajectories</li><li><strong>ERCC Spike-in Support:</strong> Incorporates ERCC spike-ins for quality control and normalization</li><li><strong>Multi-Genome Support:</strong> Compatible with multiple reference genomes including mouse (mm10, mm9) and human (GRCh38_v43)</li><li><strong>10X Compatibility:</strong> Converts raw FASTQ reads into 10X v2 format for downstream analysis</li><li><strong>Comprehensive QC:</strong> Generates detailed quality control reports and visualizations</li></ul><h3>Pipeline Workflow</h3><ol><li>Quality control and adapter trimming with Cutadapt</li><li>Read alignment to reference genome using STAR or Bowtie2</li><li>UMI counting and cell barcode demultiplexing</li><li>RNA velocity analysis (optional)</li><li>Generation of count matrices and QC reports</li></ol><h3>Input Requirements</h3><p>The pipeline requires a samplesheet in CSV or TSV format containing the following information:</p><ul><li>Sample metadata</li><li>FASTQ file paths</li><li>Batch information</li></ul><p>Additional metadata files may be required:</p><ul><li>amp_batches.xlsx - Amplification batch information</li><li>wells_cells.xlsx - Well and cell mapping</li><li>seq_batches.xlsx - Sequencing batch information</li></ul><h3>Outputs</h3><p>The pipeline generates comprehensive outputs including:</p><ul><li>Gene expression count matrices</li><li>Quality control metrics and visualizations</li><li>RNA velocity analysis results (if enabled)</li><li>MultiQC report summarizing all QC metrics</li><li>Processed data in 10X v2 format</li></ul><h3>Documentation</h3><p>For detailed usage instructions, parameter descriptions, and troubleshooting, visit the official documentation at <a href='https://nf-co.re/marsseq' target='_blank'>nf-co.re/marsseq</a></p>",
  "spec": [
    {
      "type": "Stash File",
      "label": "Input Samplesheet",
      "name": "input",
      "required": true,
      "description": "CSV or TSV file containing sample metadata and FASTQ file paths",
      "restrictions": {
        "allow_files": true,
        "allowed_file_types": [".csv", ".tsv"]
      }
    },
    {
      "type": "Stash File",
      "label": "Output Directory",
      "name": "outdir",
      "defaultValue": "./marsseq-results",
      "required": true,
      "description": "Directory where pipeline results will be saved",
      "restrictions": {
        "allow_files": false,
        "allow_folders": true
      }
    },
    {
      "type": "Select",
      "label": "Reference Genome",
      "name": "genome",
      "required": true,
      "description": "Select the reference genome for alignment",
      "options": [
        {"label": "Mouse mm10", "value": "mm10"},
        {"label": "Mouse mm9", "value": "mm9"},
        {"label": "Human GRCh38 v43", "value": "GRCh38_v43"}
      ],
      "defaultValue": "mm10"
    },
    {
      "type": "Select",
      "label": "RNA Velocity Analysis",
      "name": "velocity",
      "required": false,
      "description": "Enable RNA velocity analysis using StarSolo to study cell dynamics",
      "options": [
        {"label": "Disabled", "value": ""},
        {"label": "Enabled", "value": "--velocity"}
      ],
      "defaultValue": ""
    },
    {
      "type": "Select",
      "label": "Build References",
      "name": "build_references",
      "required": false,
      "description": "Generate genome references incorporating ERCC spike-ins (recommended for first-time use)",
      "options": [
        {"label": "No", "value": ""},
        {"label": "Yes", "value": "--build_references"}
      ],
      "defaultValue": ""
    }
  ],
  "jobConfig": [
    {
      "type": "Select",
      "label": "Resources",
      "name": "system_size",
      "description": "Select computational resources based on dataset size",
      "options": [
        {
          "label": "LARGE (recommended for typical MARS-seq datasets)",
          "value": "large",
          "mapValue": {
            "nodeSize": "LARGE",
            "numNodes": 1,
            "withGpu": false
          }
        }
      ],
      "defaultValue": "large"
    }
  ],
  "tags": [
    {"name": "marsseq", "type": "task"},
    {"name": "single-cell", "type": "task"},
    {"name": "rna-seq", "type": "task"},
    {"name": "nf-core", "type": "task"}
  ]
}
