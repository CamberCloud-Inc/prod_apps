{
  "name": "references-reference-management",
  "title": "Multi-Tool Reference Generation",
  "description": "Comprehensive reference genome index builder supporting 10+ alignment and quantification tools. Generate Bowtie, BWA, STAR, Salmon, Kallisto, HISAT2, DRAGMAP, and RSEM indexes from FASTA and GTF files. Designed to replace AWS iGenomes with modern, reproducible reference management. Samplesheet format: `sample,fastq_1,fastq_2`",
  "version": "0.1",
  "engineType": "NEXTFLOW",
  "command": "nextflow run nf-core/references --input ${input} --outdir ${outdir} --genome ${genome} --fasta ${fasta} --gtf ${gtf} --build_references ${build_references} -r ${revision}",
  "imageUrl": "https://raw.githubusercontent.com/nf-core/references/master/docs/images/nf-core-references_logo_light.png",
  "content": "<h1 class=\"heading-node\">Reference Genome Index Builder: Multi-Tool Index Generation</h1><p class=\"text-node\"><strong>Build Comprehensive Reference Indexes for 10+ Bioinformatics Tools from FASTA and GTF Files</strong></p><p class=\"text-node\">The nf-core/references pipeline is a comprehensive reference genome management solution that builds indexes for alignment, quantification, and variant calling tools. From a single FASTA and GTF input, generate all necessary reference files for your entire bioinformatics workflow, replacing the outdated AWS iGenomes with reproducible, version-controlled reference generation.</p><img src=\"https://raw.githubusercontent.com/nf-core/references/master/docs/images/nf-core-references_logo_light.png\" alt=\"nf-core/references\" width=\"400\" height=\"200\"><h2 class=\"heading-node\">The Reference Management Problem</h2><p class=\"text-node\">Most bioinformatics pipelines require tool-specific reference indexes, leading to:</p><ul class=\"list-node\"><li><p class=\"text-node\"><strong>Fragmented References:</strong> Different index versions across tools</p></li><li><p class=\"text-node\"><strong>Inconsistent Sources:</strong> Mixing references from various databases</p></li><li><p class=\"text-node\"><strong>Manual Building:</strong> Time-consuming index generation for each tool</p></li><li><p class=\"text-node\"><strong>Version Tracking:</strong> Difficulty reproducing analyses with exact references</p></li><li><p class=\"text-node\"><strong>Storage Overhead:</strong> Redundant reference files across projects</p></li></ul><p class=\"text-node\"><strong>The Solution:</strong> This pipeline builds all reference indexes from a single source in one automated workflow, ensuring consistency, reproducibility, and efficient storage.</p><h2 class=\"heading-node\">Supported Reference Index Types</h2><h3 class=\"heading-node\">DNA Alignment Indexes (FASTA Only)</h3><p class=\"text-node\">These indexes can be built from FASTA files alone:</p><ul class=\"list-node\"><li><p class=\"text-node\"><strong>Bowtie1:</strong> Short read aligner for small genomes</p></li><li><p class=\"text-node\"><strong>Bowtie2:</strong> Fast gapped aligner for diverse read lengths</p></li><li><p class=\"text-node\"><strong>BWA-MEM:</strong> Standard for DNA-seq alignment (Illumina reads)</p></li><li><p class=\"text-node\"><strong>BWA-MEM2:</strong> Faster BWA implementation with identical output</p></li><li><p class=\"text-node\"><strong>DRAGMAP:</strong> Illumina DRAGEN-compatible hash table</p></li><li><p class=\"text-node\"><strong>FASTA Dictionary:</strong> Sequence dictionary for GATK and Picard</p></li><li><p class=\"text-node\"><strong>FASTA Index (.fai):</strong> Samtools FASTA index for rapid access</p></li></ul><h3 class=\"heading-node\">RNA-Seq & Transcriptome Indexes (Requires GTF)</h3><p class=\"text-node\">These indexes require both FASTA genome and GTF annotation:</p><ul class=\"list-node\"><li><p class=\"text-node\"><strong>STAR:</strong> Splice-aware RNA-seq aligner with 2-pass mode support</p></li><li><p class=\"text-node\"><strong>HISAT2:</strong> Memory-efficient RNA-seq alignment with splice sites</p></li><li><p class=\"text-node\"><strong>Kallisto:</strong> Pseudo-alignment for fast transcript quantification</p></li><li><p class=\"text-node\"><strong>Salmon:</strong> Transcript quantification with selective alignment</p></li><li><p class=\"text-node\"><strong>RSEM:</strong> RNA-seq quantification with expectation-maximization</p></li><li><p class=\"text-node\"><strong>Transcript FASTA:</strong> Extracted coding sequences for quantification</p></li><li><p class=\"text-node\"><strong>GTF Conversion:</strong> Format conversion and validation</p></li><li><p class=\"text-node\"><strong>Splice Sites:</strong> Pre-computed splice junctions for HISAT2</p></li></ul><h3 class=\"heading-node\">Additional Reference Files</h3><ul class=\"list-node\"><li><p class=\"text-node\"><strong>VCF Tabix:</strong> Indexed VCF files for variant analysis</p></li><li><p class=\"text-node\"><strong>Genome Sizes:</strong> Chromosome size files for visualization</p></li><li><p class=\"text-node\"><strong>Intervals:</strong> Genomic interval files for variant calling</p></li></ul><h2 class=\"heading-node\">Input Requirements</h2><h3 class=\"heading-node\">Samplesheet Format</h3><p class=\"text-node\">Create a CSV file describing your reference genome(s):</p><pre class=\"block-node\"><code>sample,fastq_1,fastq_2\nGRCh38_genome,/path/to/GRCh38.primary_assembly.fa.gz,\nGRCm39_genome,/path/to/GRCm39.primary_assembly.fa.gz,\nCustom_ref,/path/to/custom_reference.fasta.gz,</code></pre><p class=\"text-node\"><strong>Column Details:</strong></p><ul class=\"list-node\"><li><p class=\"text-node\"><code class=\"inline\" spellcheck=\"false\">sample</code>: Reference genome identifier (e.g., GRCh38, mm10, custom_genome)</p></li><li><p class=\"text-node\"><code class=\"inline\" spellcheck=\"false\">fastq_1</code>: Path to reference genome FASTA file (can be gzipped)</p></li><li><p class=\"text-node\"><code class=\"inline\" spellcheck=\"false\">fastq_2</code>: Optional second file (leave empty for single reference files)</p></li></ul><p class=\"text-node\"><strong>Important Notes:</strong></p><ul class=\"list-node\"><li><p class=\"text-node\">Supports both compressed (.gz) and uncompressed FASTA files</p></li><li><p class=\"text-node\">Multiple reference genomes can be processed in a single run</p></li><li><p class=\"text-node\">Spaces in sample names are automatically converted to underscores</p></li></ul><h3 class=\"heading-node\">Additional Required Files</h3><p class=\"text-node\"><strong>For RNA-seq indexes (STAR, HISAT2, Kallisto, Salmon, RSEM):</strong></p><ul class=\"list-node\"><li><p class=\"text-node\"><strong>GTF File:</strong> Gene annotation in GTF format (provide via <code class=\"inline\" spellcheck=\"false\">--gtf</code> parameter)</p></li><li><p class=\"text-node\">Must match the reference genome build</p></li><li><p class=\"text-node\">Can be gzipped (.gtf.gz) or uncompressed (.gtf)</p></li></ul><h2 class=\"heading-node\">Key Features</h2><ul class=\"list-node\"><li><p class=\"text-node\"><strong>Unified Workflow:</strong> Build all indexes from single source files</p></li><li><p class=\"text-node\"><strong>Reproducible:</strong> Version-controlled, containerized index generation</p></li><li><p class=\"text-node\"><strong>Flexible Selection:</strong> Choose which indexes to build</p></li><li><p class=\"text-node\"><strong>Quality Validation:</strong> Automatic format checking and validation</p></li><li><p class=\"text-node\"><strong>AWS iGenomes Replacement:</strong> Modern alternative to outdated iGenomes</p></li><li><p class=\"text-node\"><strong>Storage Efficient:</strong> Centralized reference management</p></li></ul><h2 class=\"heading-node\">Comprehensive Output Files</h2><h3 class=\"heading-node\">Alignment Indexes</h3><ul class=\"list-node\"><li><p class=\"text-node\"><strong>bowtie/</strong>: Bowtie1 index files (.ebwt)</p></li><li><p class=\"text-node\"><strong>bowtie2/</strong>: Bowtie2 index files (.bt2)</p></li><li><p class=\"text-node\"><strong>bwa/</strong>: BWA-MEM index files (.amb, .ann, .bwt, .pac, .sa)</p></li><li><p class=\"text-node\"><strong>bwamem2/</strong>: BWA-MEM2 index files</p></li><li><p class=\"text-node\"><strong>dragmap/</strong>: DRAGMAP hash table directory</p></li><li><p class=\"text-node\"><strong>star/</strong>: STAR genome index directory</p></li><li><p class=\"text-node\"><strong>hisat2/</strong>: HISAT2 index files (.ht2)</p></li></ul><h3 class=\"heading-node\">Quantification Indexes</h3><ul class=\"list-node\"><li><p class=\"text-node\"><strong>kallisto/</strong>: Kallisto index (.idx)</p></li><li><p class=\"text-node\"><strong>salmon/</strong>: Salmon index directory</p></li><li><p class=\"text-node\"><strong>rsem/</strong>: RSEM reference files</p></li><li><p class=\"text-node\"><strong>transcripts.fa:</strong> Extracted transcript sequences</p></li></ul><h3 class=\"heading-node\">Reference Files</h3><ul class=\"list-node\"><li><p class=\"text-node\"><strong>.fasta.fai:</strong> Samtools FASTA index</p></li><li><p class=\"text-node\"><strong>.dict:</strong> Sequence dictionary for GATK</p></li><li><p class=\"text-node\"><strong>.sizes:</strong> Chromosome sizes file</p></li><li><p class=\"text-node\"><strong>.gtf:</strong> Validated and converted annotation file</p></li><li><p class=\"text-node\"><strong>splice_sites.txt:</strong> Pre-computed splice junctions</p></li></ul><h3 class=\"heading-node\">Quality Control</h3><ul class=\"list-node\"><li><p class=\"text-node\"><strong>MultiQC Report:</strong> Comprehensive build statistics</p></li><li><p class=\"text-node\"><strong>Pipeline Info:</strong> Software versions and execution details</p></li><li><p class=\"text-node\"><strong>Validated Samplesheet:</strong> Processed input file</p></li></ul><h2 class=\"heading-node\">Common Use Cases</h2><h3 class=\"heading-node\">RNA-seq Pipeline Setup</h3><p class=\"text-node\">Build complete reference set for RNA-seq analysis:</p><ul class=\"list-node\"><li><p class=\"text-node\">STAR index for alignment</p></li><li><p class=\"text-node\">Salmon index for quantification</p></li><li><p class=\"text-node\">RSEM index for isoform analysis</p></li><li><p class=\"text-node\">GTF annotation for downstream tools</p></li></ul><h3 class=\"heading-node\">DNA-seq Variant Calling</h3><p class=\"text-node\">Prepare references for variant calling pipelines:</p><ul class=\"list-node\"><li><p class=\"text-node\">BWA-MEM2 index for fast alignment</p></li><li><p class=\"text-node\">FASTA dictionary for GATK</p></li><li><p class=\"text-node\">Chromosome intervals for parallelization</p></li></ul><h3 class=\"heading-node\">Multi-Tool Benchmarking</h3><p class=\"text-node\">Generate indexes for comparing alignment tools:</p><ul class=\"list-node\"><li><p class=\"text-node\">Build Bowtie2, BWA, STAR, HISAT2 indexes</p></li><li><p class=\"text-node\">Ensure identical reference sequences</p></li><li><p class=\"text-node\">Compare performance and accuracy</p></li></ul><h3 class=\"heading-node\">Custom Genome References</h3><p class=\"text-node\">Build indexes for non-model organisms:</p><ul class=\"list-node\"><li><p class=\"text-node\">Use custom FASTA assemblies</p></li><li><p class=\"text-node\">Provide custom GTF annotations</p></li><li><p class=\"text-node\">Generate complete reference set</p></li></ul><h2 class=\"heading-node\">AWS iGenomes Replacement</h2><p class=\"text-node\"><strong>Why Replace iGenomes?</strong></p><ul class=\"list-node\"><li><p class=\"text-node\"><strong>Outdated:</strong> Many iGenomes references are years old</p></li><li><p class=\"text-node\"><strong>Limited Tools:</strong> Only includes subset of modern aligners</p></li><li><p class=\"text-node\"><strong>Inconsistent:</strong> Different build processes for different genomes</p></li><li><p class=\"text-node\"><strong>Not Reproducible:</strong> Unclear how indexes were generated</p></li></ul><p class=\"text-node\"><strong>This Pipeline Provides:</strong></p><ul class=\"list-node\"><li><p class=\"text-node\"><strong>Version Control:</strong> Track exact reference versions</p></li><li><p class=\"text-node\"><strong>Transparency:</strong> Complete documentation of build process</p></li><li><p class=\"text-node\"><strong>Modern Tools:</strong> Latest aligner and quantifier versions</p></li><li><p class=\"text-node\"><strong>Reproducibility:</strong> Containerized, automated building</p></li><li><p class=\"text-node\"><strong>Flexibility:</strong> Build exactly what you need</p></li></ul><h2 class=\"heading-node\">Best Practices</h2><h3 class=\"heading-node\">Reference Selection</h3><ul class=\"list-node\"><li><p class=\"text-node\"><strong>Use Primary Assemblies:</strong> Avoid alternate contigs unless specifically needed</p></li><li><p class=\"text-node\"><strong>Match Versions:</strong> Ensure FASTA and GTF are from same genome build</p></li><li><p class=\"text-node\"><strong>Standard Sources:</strong> Use Ensembl, GENCODE, or NCBI RefSeq</p></li><li><p class=\"text-node\"><strong>Soft Masking:</strong> Use soft-masked genomes for RNA-seq</p></li></ul><h3 class=\"heading-node\">Index Building Strategy</h3><ul class=\"list-node\"><li><p class=\"text-node\"><strong>Build Once, Use Many:</strong> Generate comprehensive reference set upfront</p></li><li><p class=\"text-node\"><strong>Version Naming:</strong> Include genome build and date in sample names</p></li><li><p class=\"text-node\"><strong>Documentation:</strong> Record source URLs and build parameters</p></li><li><p class=\"text-node\"><strong>Storage:</strong> Use centralized reference directory for organization</p></li></ul><h3 class=\"heading-node\">Memory Considerations</h3><ul class=\"list-node\"><li><p class=\"text-node\"><strong>STAR:</strong> Requires substantial RAM (30-50GB for human genome)</p></li><li><p class=\"text-node\"><strong>BWA:</strong> Moderate memory requirements (5-10GB)</p></li><li><p class=\"text-node\"><strong>Salmon/Kallisto:</strong> Lower memory, faster builds</p></li><li><p class=\"text-node\"><strong>Recommendation:</strong> Use LARGE or XLARGE compute for human/mouse genomes</p></li></ul><h2 class=\"heading-node\">Supported Organisms</h2><p class=\"text-node\"><strong>Works with any organism:</strong></p><ul class=\"list-node\"><li><p class=\"text-node\">Human (GRCh38/hg38, GRCh37/hg19)</p></li><li><p class=\"text-node\">Mouse (GRCm39/mm39, GRCm38/mm10)</p></li><li><p class=\"text-node\">Rat, zebrafish, fly, worm, yeast</p></li><li><p class=\"text-node\">Plants, bacteria, viruses</p></li><li><p class=\"text-node\">Custom genomes and assemblies</p></li></ul><h2 class=\"heading-node\">Technical Implementation</h2><ul class=\"list-node\"><li><p class=\"text-node\"><strong>Pipeline Framework:</strong> Built with Nextflow DSL2</p></li><li><p class=\"text-node\"><strong>Containers:</strong> Docker/Singularity for all tools</p></li><li><p class=\"text-node\"><strong>Cloud Ready:</strong> Works on AWS, GCP, Azure</p></li><li><p class=\"text-node\"><strong>HPC Compatible:</strong> SLURM, SGE, LSF support</p></li><li><p class=\"text-node\"><strong>Resource Management:</strong> Automatic scaling and optimization</p></li></ul><p class=\"text-node\"><strong>Perfect for:</strong> Reference management \u2022 RNA-seq \u2022 DNA-seq \u2022 Variant calling \u2022 Multi-omics \u2022 Pipeline development \u2022 Benchmarking \u2022 Custom genomes</p><p class=\"text-node\">Built with <a class=\"link\" href=\"https://www.nextflow.io/\" target=\"_blank\">Nextflow</a> \u2022 Powered by <a class=\"link\" href=\"https://nf-co.re/references\" target=\"_blank\">nf-core/references</a> \u2022 Containerized execution \u2022 AWS iGenomes replacement</p>",
  "spec": [
    {
      "type": "Stash File",
      "label": "Input Samplesheet",
      "name": "input",
      "description": "CSV file with columns: sample, fastq_1, fastq_2. The sample column is the reference name, fastq_1 is the path to FASTA genome file.",
      "required": true,
      "restrictions": {
        "allow_files": true,
        "allowed_file_types": [
          ".csv",
          ".tsv"
        ]
      }
    },
    {
      "type": "Stash File",
      "label": "Output Directory",
      "name": "outdir",
      "description": "Directory where all reference indexes will be saved",
      "defaultValue": "./references-results",
      "required": true,
      "restrictions": {
        "allow_files": false,
        "allow_folders": true
      }
    },
    {
      "type": "Input",
      "label": "Genome Name",
      "name": "genome",
      "description": "Reference genome identifier (e.g., GRCh38, GRCm39, hg38)",
      "defaultValue": "",
      "required": false
    },
    {
      "type": "Stash File",
      "label": "FASTA File",
      "name": "fasta",
      "description": "Path to reference genome FASTA file (alternative to samplesheet)",
      "defaultValue": "",
      "required": false,
      "restrictions": {
        "allow_files": true,
        "allowed_file_types": [
          ".fasta",
          ".fa",
          ".fna",
          ".gz"
        ]
      }
    },
    {
      "type": "Stash File",
      "label": "GTF Annotation",
      "name": "gtf",
      "description": "Gene annotation GTF file (required for STAR, HISAT2, Kallisto, Salmon, RSEM)",
      "defaultValue": "",
      "required": false,
      "restrictions": {
        "allow_files": true,
        "allowed_file_types": [
          ".gtf",
          ".gtf.gz"
        ]
      }
    },
    {
      "type": "Input",
      "label": "Build References",
      "name": "build_references",
      "description": "Select which reference indexes to build (comma-separated list: bowtie1,bowtie2,bwa,bwamem2,dragmap,hisat2,kallisto,rsem,salmon,star)",
      "defaultValue": "bowtie2,bwa",
      "required": false
    },
    {
      "type": "Input",
      "label": "Pipeline Revision",
      "name": "revision",
      "description": "nf-core/references pipeline version",
      "defaultValue": "0.1",
      "required": true
    },
    {
      "type": "Checkbox",
      "label": "Skip QC",
      "name": "skip_qc",
      "description": "Skip quality control steps",
      "defaultValue": false,
      "required": false
    }
  ],
  "jobConfig": [
    {
      "type": "Select",
      "label": "System Size",
      "name": "system_size",
      "description": "Select compute resources. LARGE recommended for human/mouse genomes, especially when building STAR indexes.",
      "options": [
        {
          "label": "SMALL (16 CPUs, 60GB RAM) - Small genomes only",
          "value": "small",
          "mapValue": {
            "nodeSize": "SMALL",
            "numNodes": 1,
            "withGpu": false
          }
        },
        {
          "label": "MEDIUM (32 CPUs, 180GB RAM) - Medium genomes",
          "value": "medium",
          "mapValue": {
            "nodeSize": "MEDIUM",
            "numNodes": 1,
            "withGpu": false
          }
        },
        {
          "label": "LARGE (64 CPUs, 360GB RAM) - Human/mouse (Recommended)",
          "value": "large",
          "mapValue": {
            "nodeSize": "LARGE",
            "numNodes": 1,
            "withGpu": false
          }
        }
      ],
      "defaultValue": "large"
    }
  ],
  "tags": [
    {
      "name": "references",
      "type": "task"
    },
    {
      "name": "bioinformatics",
      "type": "domain"
    },
    {
      "name": "genomics",
      "type": "domain"
    },
    {
      "name": "index-building",
      "type": "task"
    }
  ]
}