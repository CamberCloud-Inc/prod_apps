{
  "name": "callingcards-tf-binding",
  "title": "Calling Cards - Transcription Factor Binding Analysis",
  "description": "Map transcription factor binding sites genome-wide using transposon-based Calling Cards technology. Processes raw sequencing data from yeast and mammalian experiments to identify protein-DNA interactions with temporal resolution. Samplesheet format: `sample,fastq_1,fastq_2,barcode_details`",
  "version": "1.0.0",
  "engineType": "NEXTFLOW",
  "command": "nextflow run nf-core/callingcards --input ${input} --outdir ${outdir} --datatype ${datatype} --aligner ${aligner} -r 1.0.0",
  "imageUrl": "https://raw.githubusercontent.com/nf-core/callingcards/master/docs/images/nf-core-callingcards_logo_light.png",
  "content": "<h2><strong>Calling Cards - Transcription Factor Binding Analysis</strong></h2><p>Map genome-wide transcription factor binding sites using transposon-based Calling Cards technology. Processes raw sequencing data to identify and quantify TF-DNA interactions with temporal resolution in yeast and mammalian systems.</p><h3><strong>What is Calling Cards?</strong></h3><blockquote><p><strong>Calling Cards</strong> is a transposon-based method for mapping protein-DNA interactions. When a transcription factor binds DNA, it recruits a transposase that inserts a transposon nearby, creating a permanent molecular record ('calling card') of the binding event. Deep sequencing reveals these insertion sites genome-wide.</p></blockquote><h3><strong>Why Use Calling Cards?</strong></h3><ul><li><strong>In Vivo Binding</strong>: Maps TF binding in living cells, not crosslinked extracts</li><li><strong>Temporal Resolution</strong>: Accumulates binding events over time, increasing sensitivity</li><li><strong>No Antibodies Required</strong>: Works with any DNA-binding protein</li><li><strong>Quantitative</strong>: Insertion frequency reflects binding strength and duration</li><li><strong>Genome-Wide Coverage</strong>: Unbiased detection across entire genome</li><li><strong>Multiplexing</strong>: Barcode multiple TFs in single experiment</li></ul><h3><strong>Key Features</strong></h3><ul><li><strong>Dual Organism Support</strong>: Optimized for yeast (S. cerevisiae) and mammals (human, mouse)</li><li><strong>Comprehensive QC</strong>: FastQC and MultiQC quality assessment</li><li><strong>Barcode Demultiplexing</strong>: Separate reads by TF-specific barcodes</li><li><strong>Flexible Alignment</strong>: Choose from Bowtie, Bowtie2, BWA, BWAmem2</li><li><strong>Hop Counting</strong>: CallingCardsTools for insertion site quantification</li><li><strong>Organism-Specific Workflows</strong>: Tailored processing for yeast vs mammalian data</li></ul><h3><strong>Pipeline Workflow</strong></h3><ol><li><strong>Quality Control</strong>: FastQC evaluates raw read quality</li><li><strong>Genome Preparation</strong>: Index reference genome for chosen aligner</li><li><strong>Barcode Demultiplexing</strong>: Separate reads by TF barcodes</li><li><strong>Read Trimming</strong>: Remove adapters and low-quality bases (optional)</li><li><strong>Alignment</strong>: Map reads to reference genome</li><li><strong>Hop Counting</strong>: Identify and quantify transposon insertion sites</li><li><strong>Quality Reporting</strong>: MultiQC aggregates all metrics</li></ol><h3><strong>Calling Cards Technology</strong></h3><table><tr><th>Component</th><th>Function</th><th>Details</th></tr><tr><td><strong>TF of Interest</strong></td><td>DNA binding protein</td><td>Your transcription factor under study</td></tr><tr><td><strong>Transposase</strong></td><td>Inserts transposon</td><td>Recruited by TF to binding sites</td></tr><tr><td><strong>Transposon</strong></td><td>Inserted DNA element</td><td>Permanent molecular record</td></tr><tr><td><strong>Barcode</strong></td><td>TF identifier</td><td>Unique sequence for multiplexing</td></tr></table><h3><strong>Yeast vs Mammalian Workflows</strong></h3><p><strong>Yeast (S. cerevisiae)</strong>:</p><ul><li>Uses Ty5 retrotransposon system</li><li>Integrase-based insertion mechanism</li><li>High insertion frequency (~1000s per experiment)</li><li>Established protocol with extensive literature</li><li>Ideal for regulatory network mapping</li></ul><p><strong>Mammals (Human, Mouse)</strong>:</p><ul><li>Uses piggyBac transposon system</li><li>Requires cell culture and transfection</li><li>Lower insertion frequency, requires more reads</li><li>Enables TF studies in human disease models</li><li>Parallel processing for efficiency</li></ul><h3><strong>Scientific Applications</strong></h3><ul><li><strong>Regulatory Network Mapping</strong>: Identify all genomic targets of a TF</li><li><strong>Binding Site Discovery</strong>: Find novel TF recognition motifs</li><li><strong>Comparative Genomics</strong>: Compare TF binding across conditions/species</li><li><strong>Gene Regulation Studies</strong>: Link TF binding to gene expression</li><li><strong>Chromatin Context</strong>: Determine accessible vs inaccessible binding sites</li><li><strong>TF Competition</strong>: Identify overlapping TF binding regions</li></ul><h3><strong>Input Requirements</strong></h3><p>CSV or TSV samplesheet with the following columns:</p><ul><li><strong>sample</strong>: Unique sample identifier</li><li><strong>fastq_1</strong>: Path to Read 1 FASTQ file</li><li><strong>fastq_2</strong>: Path to Read 2 FASTQ file (paired-end)</li><li><strong>barcode_details</strong>: Path to JSON file with barcode information</li></ul><p><strong>Example samplesheet:</strong></p><pre>sample,fastq_1,fastq_2,barcode_details\nGCN4_experiment,gcn4_R1.fq.gz,gcn4_R2.fq.gz,barcodes.json\nMSN2_experiment,msn2_R1.fq.gz,msn2_R2.fq.gz,barcodes.json</pre><p><strong>Barcode Details JSON</strong>:</p><pre>{\n  \"GCN4\": {\"barcode\": \"ATCGATCG\", \"tf_name\": \"GCN4\"},\n  \"MSN2\": {\"barcode\": \"GCTAGCTA\", \"tf_name\": \"MSN2\"}\n}</pre><h3><strong>Sequencing Requirements</strong></h3><ul><li><strong>Read Depth</strong>: 10-50M reads for yeast, 50-200M for mammals</li><li><strong>Read Type</strong>: Paired-end recommended (2x75bp or 2x150bp)</li><li><strong>Quality</strong>: Phred score >30 for accurate insertion mapping</li><li><strong>Library Prep</strong>: Standard Illumina with unique barcodes per TF</li></ul><h3><strong>Main Outputs</strong></h3><ul><li><strong>Hop Count Files</strong>: Quantified transposon insertion sites per TF</li><li><strong>BED/BigWig Files</strong>: Genome browser tracks of insertion density</li><li><strong>Peak Files</strong>: Significant TF binding peaks</li><li><strong>BAM Files</strong>: Aligned reads for visualization</li><li><strong>QC Reports</strong>: MultiQC comprehensive quality metrics</li><li><strong>Demultiplexed FASTQs</strong>: Separated reads by barcode</li><li><strong>Summary Statistics</strong>: Insertion counts, mapping rates per TF</li></ul><h3><strong>Hop Counting and Peak Calling</strong></h3><ul><li><strong>Insertion Sites</strong>: Precise genomic coordinates of transposon insertions</li><li><strong>Hop Density</strong>: Number of insertions per genomic region</li><li><strong>Background Correction</strong>: Account for insertion biases</li><li><strong>Peak Identification</strong>: Regions with significantly enriched insertions</li><li><strong>Motif Analysis</strong>: Extract TF binding motifs from peak sequences</li></ul><h3><strong>Quality Control Metrics</strong></h3><ul><li><strong>Total Reads</strong>: Raw sequencing depth per sample</li><li><strong>Mapping Rate</strong>: Percentage of reads aligning to genome</li><li><strong>Unique Insertions</strong>: Number of distinct hop sites per TF</li><li><strong>Barcode Assignment</strong>: Read distribution across TFs</li><li><strong>Insertion Bias</strong>: Check for transposon sequence preferences</li><li><strong>Library Complexity</strong>: PCR duplication assessment</li></ul><h3><strong>Advantages Over ChIP-seq</strong></h3><table><tr><th>Feature</th><th>Calling Cards</th><th>ChIP-seq</th></tr><tr><td><strong>Antibody</strong></td><td>Not required</td><td>Required (expensive, availability)</td></tr><tr><td><strong>In vivo</strong></td><td>Yes, living cells</td><td>Crosslinked, may miss transient binding</td></tr><tr><td><strong>Temporal</strong></td><td>Accumulates over time</td><td>Snapshot at collection time</td></tr><tr><td><strong>Sensitivity</strong></td><td>High (accumulation)</td><td>Variable (depends on antibody)</td></tr><tr><td><strong>Multiplexing</strong></td><td>Easy (barcodes)</td><td>Difficult (requires separate IPs)</td></tr><tr><td><strong>Resolution</strong></td><td>Single base pair</td><td>~100-300bp fragments</td></tr></table><h3><strong>Experimental Design</strong></h3><p><strong>1. TF Selection</strong>: Choose transcription factors of interest</p><p><strong>2. Barcode Design</strong>: Assign unique barcodes to each TF</p><p><strong>3. Strain Construction</strong>: Build yeast strains or mammalian cell lines</p><p><strong>4. Growth/Treatment</strong>: Culture under conditions of interest</p><p><strong>5. DNA Extraction</strong>: Isolate genomic DNA with transposon insertions</p><p><strong>6. Library Prep</strong>: PCR amplify insertion junctions</p><p><strong>7. Sequencing</strong>: Illumina paired-end sequencing</p><p><strong>8. Analysis</strong>: Run Calling Cards pipeline</p><h3><strong>Data Analysis Strategy</strong></h3><ul><li><strong>Background Model</strong>: Use control samples without TF expression</li><li><strong>Peak Calling</strong>: Identify regions with insertion enrichment</li><li><strong>Motif Discovery</strong>: Extract consensus TF binding motifs</li><li><strong>Gene Annotation</strong>: Link peaks to nearby genes</li><li><strong>Differential Binding</strong>: Compare TF occupancy across conditions</li><li><strong>Integration with Expression</strong>: Correlate binding with gene expression</li></ul><h3><strong>Biological Insights</strong></h3><ul><li><strong>Direct TF Targets</strong>: Genes directly regulated by each TF</li><li><strong>Binding Motifs</strong>: Sequence preferences for TF recognition</li><li><strong>Regulatory Logic</strong>: Combinatorial TF binding patterns</li><li><strong>Chromatin Accessibility</strong>: Which sites are accessible in vivo?</li><li><strong>Condition-Specific Binding</strong>: How TF occupancy changes with environment</li><li><strong>TF Competition</strong>: Overlapping binding sites between TFs</li></ul><h3><strong>Comparison: Yeast vs Mammalian Systems</strong></h3><ul><li><strong>Yeast Advantages</strong>: Fast, cheap, high insertion rate, simple genome</li><li><strong>Mammalian Advantages</strong>: Human disease relevance, complex regulation</li><li><strong>Yeast Considerations</strong>: Different chromatin structure, smaller genome</li><li><strong>Mammalian Considerations</strong>: Requires optimization, lower insertion frequency</li></ul><h3><strong>Downstream Analysis</strong></h3><ul><li><strong>Motif Analysis</strong>: MEME, HOMER for TF binding motif discovery</li><li><strong>Gene Ontology</strong>: Functional enrichment of TF target genes</li><li><strong>Pathway Analysis</strong>: Which biological pathways does TF regulate?</li><li><strong>Network Reconstruction</strong>: Build regulatory network from multiple TFs</li><li><strong>Comparative Analysis</strong>: Compare TF binding across species or conditions</li></ul><h3><strong>Technical Considerations</strong></h3><ul><li><strong>Insertion Bias</strong>: Transposons have sequence preferences</li><li><strong>Background Insertions</strong>: Correct for non-specific transposition</li><li><strong>Read Depth</strong>: Sufficient coverage for rare insertion events</li><li><strong>Barcode Design</strong>: Balanced, low error rates</li><li><strong>PCR Duplicates</strong>: Remove amplification artifacts</li></ul><h3><strong>Example Research Applications</strong></h3><ul><li><strong>Stress Response</strong>: How do yeast TFs respond to environmental stress?</li><li><strong>Cell Cycle</strong>: TF binding dynamics through cell cycle stages</li><li><strong>Development</strong>: Regulatory networks in differentiation</li><li><strong>Disease</strong>: TF dysregulation in cancer or metabolic disorders</li><li><strong>Evolution</strong>: Conserved vs divergent TF binding across species</li></ul><h3><strong>Expected Runtime</strong></h3><ul><li><strong>Yeast experiments</strong>: 2-4 hours per sample</li><li><strong>Mammalian experiments</strong>: 4-8 hours per sample</li><li><strong>Multiple TFs (barcoded)</strong>: Scales with read depth</li><li><strong>Recommended resources</strong>: LARGE node for optimal performance</li></ul><blockquote><p><strong>Perfect for:</strong> Transcription Factor Studies • Regulatory Network Mapping • Gene Regulation • Chromatin Biology • Yeast Genetics • Mammalian Genomics • Systems Biology • Comparative Genomics</p></blockquote>",
  "spec": [
    {
      "type": "Stash File",
      "label": "Input Samplesheet",
      "name": "input",
      "description": "CSV or TSV samplesheet containing sample names, paths to FASTQ files, and paths to barcode details JSON files. Required columns: sample, fastq_1, fastq_2 (for paired-end), barcode_details.",
      "required": true,
      "restrictions": {
        "allow_files": true,
        "allowed_file_types": [
          ".csv",
          ".tsv"
        ]
      }
    },
    {
      "type": "Stash File",
      "label": "Output Directory",
      "name": "outdir",
      "description": "The output directory where results will be saved, including processed reads, alignment files, insertion site counts, and comprehensive quality control reports.",
      "defaultValue": "./callingcards-results",
      "required": true,
      "restrictions": {
        "allow_files": false,
        "allow_folders": true
      }
    },
    {
      "type": "Radio",
      "label": "Organism Type",
      "name": "datatype",
      "description": "Select the organism type for your Calling Cards experiment. Choose 'yeast' for S. cerevisiae experiments or 'mammals' for human/mouse experiments. This determines the appropriate processing workflow and default parameters.",
      "defaultValue": "yeast",
      "required": true,
      "options": [
        {
          "label": "Yeast (S. cerevisiae)",
          "value": "yeast"
        },
        {
          "label": "Mammals (Human/Mouse)",
          "value": "mammals"
        }
      ]
    },
    {
      "type": "Radio",
      "label": "Aligner",
      "name": "aligner",
      "description": "Select the alignment tool for mapping reads to the reference genome. Bowtie2 (default) offers good balance of speed and accuracy for most applications. BWA-MEM2 provides faster performance for larger datasets.",
      "defaultValue": "bowtie2",
      "required": false,
      "options": [
        {
          "label": "Bowtie2 (recommended)",
          "value": "bowtie2"
        },
        {
          "label": "Bowtie",
          "value": "bowtie"
        },
        {
          "label": "BWA",
          "value": "bwa"
        },
        {
          "label": "BWA-MEM2",
          "value": "bwamem2"
        }
      ]
    },
    {
      "type": "Input",
      "label": "Reference Genome FASTA",
      "name": "fasta",
      "description": "Path to reference genome FASTA file. Required for mammals workflow. For yeast, default reference will be used if not specified.",
      "defaultValue": "",
      "required": false
    },
    {
      "type": "Input",
      "label": "Gene Annotation GTF/GFF",
      "name": "gtf",
      "description": "Path to gene annotation file in GTF or GFF format. Used for annotating insertion sites relative to genomic features.",
      "defaultValue": "",
      "required": false
    },
    {
      "type": "Input",
      "label": "Minimum Mapping Quality",
      "name": "min_mapq",
      "description": "Minimum mapping quality score (MAPQ) for filtering aligned reads. Higher values (e.g., 30) ensure more confident alignments but may reduce sensitivity. Range: 0-60.",
      "defaultValue": "10",
      "required": false
    },
    {
      "type": "Input",
      "label": "R1 Read Crop Length",
      "name": "r1_crop",
      "description": "Number of bases to crop from R1 reads during preprocessing. Useful for removing low-quality bases or adapter sequences from read ends.",
      "defaultValue": "0",
      "required": false
    },
    {
      "type": "Checkbox",
      "label": "Skip Trimming",
      "name": "skip_trimming",
      "description": "Skip the read trimming step if your reads are already preprocessed or of high quality throughout their length.",
      "defaultValue": false,
      "required": false
    },
    {
      "type": "Input",
      "label": "Email",
      "name": "email",
      "description": "Email address for pipeline completion summary and notifications.",
      "defaultValue": "",
      "required": false
    },
    {
      "type": "Input",
      "label": "MultiQC Title",
      "name": "multiqc_title",
      "description": "Custom title for the MultiQC report. Will be displayed as the page header and used in the filename.",
      "defaultValue": "",
      "required": false
    }
  ],
  "jobConfig": [
    {
      "type": "Select",
      "label": "System Resources",
      "name": "system_size",
      "options": [
        {
          "label": "SMALL (2 nodes)",
          "value": "small",
          "mapValue": {
            "nodeSize": "SMALL",
            "numNodes": 2,
            "withGpu": false
          }
        },
        {
          "label": "MEDIUM (4 nodes)",
          "value": "medium",
          "mapValue": {
            "nodeSize": "MEDIUM",
            "numNodes": 4,
            "withGpu": false
          }
        },
        {
          "label": "LARGE (8 nodes) - Recommended",
          "value": "large",
          "mapValue": {
            "nodeSize": "LARGE",
            "numNodes": 8,
            "withGpu": false
          }
        }
      ],
      "defaultValue": "large"
    }
  ],
  "tags": [
    {
      "name": "callingcards",
      "type": "task"
    },
    {
      "name": "transcription-factor",
      "type": "task"
    },
    {
      "name": "genomics",
      "type": "domain"
    }
  ]
}