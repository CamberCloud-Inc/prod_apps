{
  "name": "sopa-spatial-omics",
  "title": "Spatial Omics Analysis (Multi-Platform)",
  "description": "Universal spatial omics analysis pipeline supporting Xenium, Visium HD, MERSCOPE, CosMX, and other spatial transcriptomics/proteomics platforms. Single-cell resolution spatial data processing.",
  "version": "1.0.0",
  "engineType": "NEXTFLOW",
  "command": "nextflow run nf-core/sopa --input ${input} -params-file ${params_file} --outdir ${outdir} -r dev ",
  "imageUrl": "https://raw.githubusercontent.com/nf-core/sopa/master/docs/images/nf-core-sopa_logo_light.png",
  "content": "<h2><strong>Universal Spatial Omics Pipeline</strong></h2><p><strong>Sopa</strong> (Spatial Omics Pipeline Analysis) provides unified processing for spatial transcriptomics and proteomics data across multiple platforms. Built on SpatialData standard for interoperable spatial biology.</p><h3><strong>Supported Technologies</strong></h3><blockquote><p><strong>Spatial Transcriptomics</strong>:</p><ul><li><strong>Xenium</strong>: 10X in-situ gene expression (500+ genes)</li><li><strong>Visium HD</strong>: 10X high-definition spatial (bins to subcellular)</li><li><strong>MERSCOPE</strong>: Vizgen multiplexed imaging (100-1000+ genes)</li><li><strong>CosMX</strong>: NanoString spatial profiling (up to 1000 RNA + 64 protein)</li><li><strong>Molecular Cartography</strong>: Resolve Biosciences</li></ul><p><strong>Spatial Proteomics</strong>:</p><ul><li><strong>PhenoCycler</strong>: Akoya multiplexed protein imaging</li><li><strong>MACSima</strong>: Miltenyi tissue imaging</li><li><strong>CODEX</strong>: CO-Detection by indEXing</li></ul></blockquote><h3><strong>Why Spatial Omics?</strong></h3><ul><li><strong>Tissue Architecture</strong>: Preserve spatial context of gene expression</li><li><strong>Cell-Cell Interactions</strong>: Identify neighboring cell types</li><li><strong>Tissue Niches</strong>: Discover microenvironments</li><li><strong>Tumor Microenvironment</strong>: Immune infiltration patterns</li><li><strong>Developmental Zones</strong>: Spatial gradients in organs</li><li><strong>Disease Pathology</strong>: Lesion boundaries, inflammation zones</li></ul><h3><strong>Pipeline Features</strong></h3><p><strong>Segmentation</strong>:</p><ul><li><strong>Cellpose</strong>: Deep learning cell segmentation</li><li><strong>Watershed</strong>: Nucleus-based segmentation</li><li><strong>Baysor</strong>: Transcript-based segmentation</li><li><strong>Custom Models</strong>: User-provided segmentation</li></ul><p><strong>Quantification</strong>:</p><ul><li><strong>Transcript Assignment</strong>: Assign molecules to cells</li><li><strong>Gene Expression Matrix</strong>: Counts per cell</li><li><strong>Spatial Coordinates</strong>: X, Y positions</li></ul><p><strong>Spatial Analysis</strong>:</p><ul><li><strong>Neighborhood Analysis</strong>: Cell-cell proximity</li><li><strong>Spatial Clustering</strong>: Identify tissue domains</li><li><strong>Niche Detection</strong>: Recurring microenvironments</li><li><strong>Spatial Statistics</strong>: Moran's I, Geary's C</li></ul><h3><strong>Scientific Applications</strong></h3><ul><li><strong>Cancer</strong>: Tumor-immune interactions, metastatic niches</li><li><strong>Immunology</strong>: Lymphoid structure organization</li><li><strong>Neuroscience</strong>: Brain region architecture, cell layers</li><li><strong>Development</strong>: Spatial patterning, morphogen gradients</li><li><strong>Pathology</strong>: Disease lesion characterization</li><li><strong>Drug Discovery</strong>: Target localization, drug distribution</li></ul><h3><strong>Input Requirements</strong></h3><p>CSV samplesheet with columns:</p><ul><li><strong>sample</strong>: Unique sample ID</li><li><strong>image</strong> (or multiple image types): Microscopy images</li><li><strong>transcripts</strong>: Transcript location file (CSV/Parquet) [for transcript-based]</li><li><strong>fastq_dir</strong>: FASTQ directory [for Visium HD]</li></ul><p>YAML params file with Sopa configuration:</p><ul><li>Segmentation method</li><li>Technology-specific parameters</li><li>Analysis options</li></ul><h3><strong>Key Outputs</strong></h3><ul><li><strong>SpatialData Object</strong>: Standardized spatial data (.zarr)</li><li><strong>Cell Segmentation</strong>: Cell boundaries</li><li><strong>Expression Matrix</strong>: Gene counts per cell with coordinates</li><li><strong>Spatial Plots</strong>: Tissue visualization with expression overlays</li><li><strong>Neighborhood Graph</strong>: Cell-cell spatial relationships</li><li><strong>Niche Annotations</strong>: Tissue microenvironments</li></ul><blockquote><p><strong>Perfect for:</strong> Spatial transcriptomics • Tissue architecture • Cell-cell interactions • Tumor microenvironment • Multi-platform spatial data</p></blockquote>",
  "spec": [
    {
      "type": "Stash File",
      "label": "Sample Sheet",
      "name": "input",
      "description": "CSV with spatial data paths",
      "required": true,
      "restrictions": {
        "allow_files": true,
        "allow_folders": false,
        "allowed_file_types": [".csv"]
      }
    },
    {
      "type": "Stash File",
      "label": "Parameters File",
      "name": "params_file",
      "description": "YAML file with Sopa configuration",
      "required": true,
      "restrictions": {
        "allow_files": true,
        "allow_folders": false,
        "allowed_file_types": [".yaml", ".yml"]
      }
    },
    {
      "type": "Stash File",
      "label": "Output Directory",
      "name": "outdir",
      "description": "Output directory",
      "defaultValue": "./sopa-results",
      "required": true,
      "restrictions": {
        "allow_files": false,
        "allow_folders": true
      }
    }
  ],
  "jobConfig": [
    {
      "type": "Select",
      "label": "Compute Resources",
      "name": "system_size",
      "hidden": false,
      "options": [
        {"label": "XLARGE (Recommended for spatial data)", "value": "xlarge", "mapValue": {"nodeSize": "XLARGE", "numNodes": 1, "withGpu": false}}
      ],
      "defaultValue": "xlarge"
    }
  ],
  "tags": [
    {"name": "spatial-transcriptomics", "type": "field"},
    {"name": "spatial-omics", "type": "task"},
    {"name": "imaging", "type": "task"}
  ]
}
