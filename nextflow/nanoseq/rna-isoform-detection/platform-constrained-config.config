// OPTIMIZED CONFIGURATION FOR NANOSEQ RNA ISOFORM DETECTION
// Optimized for direct RNA sequencing and transcript isoform analysis
// Targets LARGE node (64 CPUs, 360GB RAM) for long-read RNA-seq processing

process {
    // Default resource allocation for standard processes
    cpus = 4
    memory = '16.GB'
    time = '24.h'

    // Quality control processes
    withName:NANOPLOT {
        cpus = 8
        memory = '32.GB'
        time = '12.h'
    }

    withName:FASTQC {
        cpus = 8
        memory = '32.GB'
        time = '12.h'
    }

    withName:MULTIQC {
        cpus = 4
        memory = '16.GB'
        time = '8.h'
    }

    // Basecalling processes (if using fast5)
    withName:'.*:GUPPY:.*' {
        cpus = 24
        memory = '96.GB'
        time = '48.h'
    }

    withName:'.*:DORADO:.*' {
        cpus = 24
        memory = '96.GB'
        time = '48.h'
    }

    // Alignment processes - optimized for long reads
    withName:'.*:GRAPHMAP2_ALIGN.*' {
        cpus = 32
        memory = '128.GB'
        time = '48.h'
    }

    withName:'.*:MINIMAP2_ALIGN.*' {
        cpus = 32
        memory = '128.GB'
        time = '48.h'
    }

    // Transcript reconstruction and isoform detection
    withName:'.*:BAMBU.*' {
        cpus = 24
        memory = '96.GB'
        time = '48.h'
    }

    withName:'.*:STRINGTIE2.*' {
        cpus = 20
        memory = '80.GB'
        time = '36.h'
    }

    // Quantification processes
    withName:'.*:FEATURECOUNTS.*' {
        cpus = 16
        memory = '64.GB'
        time = '24.h'
    }

    withName:'.*:SALMON_QUANT.*' {
        cpus = 20
        memory = '80.GB'
        time = '36.h'
    }

    // RNA modification detection
    withName:'.*:XPORE.*' {
        cpus = 16
        memory = '64.GB'
        time = '36.h'
    }

    withName:'.*:M6ANET.*' {
        cpus = 16
        memory = '64.GB'
        time = '36.h'
    }

    // RNA fusion detection
    withName:'.*:JAFFAL.*' {
        cpus = 20
        memory = '80.GB'
        time = '48.h'
    }

    // Differential expression analysis
    withName:'.*:DESEQ2.*' {
        cpus = 12
        memory = '48.GB'
        time = '24.h'
    }

    withName:'.*:DEXSEQ.*' {
        cpus = 12
        memory = '48.GB'
        time = '24.h'
    }

    // Sorting and indexing
    withName:'.*:SAMTOOLS.*' {
        cpus = 16
        memory = '48.GB'
        time = '24.h'
    }

    // Process labels optimized for long-read RNA-seq
    withLabel:process_single { cpus = 2; memory = '8.GB'; time = '12.h' }
    withLabel:process_low { cpus = 4; memory = '16.GB'; time = '24.h' }
    withLabel:process_medium { cpus = 12; memory = '48.GB'; time = '36.h' }
    withLabel:process_high { cpus = 24; memory = '96.GB'; time = '48.h' }
    withLabel:process_long { cpus = 8; memory = '32.GB'; time = '72.h' }
    withLabel:process_high_memory { cpus = 16; memory = '128.GB'; time = '48.h' }

    // Error handling
    errorStrategy = 'retry'
    maxRetries = 2
}

// NO max_cpus, max_memory, max_time parameters - platform doesn't support them
// NO container overrides - let platform handle
// NO executor overrides - let platform handle